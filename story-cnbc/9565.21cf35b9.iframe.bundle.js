"use strict";(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[9565],{"./components/ElectionMap/ElectionMap.js":(re,L,i)=>{i.r(L),i.d(L,{default:()=>st});var y=i("./node_modules/@babel/runtime/helpers/esm/extends.js"),D=i("./node_modules/styled-jsx/style.js"),v=i.n(D),s=i("./node_modules/next/dist/compiled/react/index.js"),E=i("./node_modules/d3-geo/src/path/index.js"),l=i("./node_modules/d3-geo/src/projection/albersUsa.js"),P=i("./node_modules/d3-zoom/src/index.js"),b=i("./node_modules/d3-selection/src/select.js"),x=i("./node_modules/prop-types/index.js"),n=i.n(x),Y=i("./components/ElectionMap/MapBoundingBox.js"),M=i("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),ue=i("./node_modules/classnames/index.js"),k=i.n(ue),A=i("./node_modules/lodash-es/isFunction.js"),B=i("./components/ElectionMap/constants.js");function W(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,o)}return t}function H(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?W(Object(t),!0).forEach(function(o){(0,M.default)(r,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))})}return r}const X=n().shape({fill:n().oneOfType([n().string,n().func]),height:n().oneOfType([n().string,n().number,n().func]),hoverStroke:n().oneOfType([n().string,n().func]),stroke:n().oneOfType([n().string,n().func]),strokeWidth:n().oneOfType([n().string,n().number,n().func]),textShadow:n().bool,textStyle:n().oneOfType([n().object,n().func]),width:n().oneOfType([n().string,n().number,n().func])}),ne={featureId:n().func,geoFeatures:n().arrayOf(n().shape({})),geoPath:n().func,id:n().string,selectedFeature:n().shape({}),style:X,transform:n().shape({}),visibleFeatures:n().arrayOf(n().number)},z=n().shape(H(H({},ne),{},{type:n().oneOf([B.LAYER_TYPE.GEO]).isRequired})),G={filter:n().func,geoFeatures:n().arrayOf(n().shape({})),height:n().number,id:n().string,onFeatureClick:n().func,onFeatureHover:n().func,projection:n().func,transform:n().shape({}),width:n().number},K=n().shape(H(H({},G),{},{type:n().oneOf([B.LAYER_TYPE.INTERACTIVE]).isRequired})),se={id:n().string,featureId:n().func,filter:n().func,label:n().oneOfType([n().func,n().string]),position:n().oneOfType([n().oneOf(["R","B","L","T"]),n().func]),source:n().shape({}),transform:n().shape({}),visibleFeatures:n().arrayOf(n().number)},le=n().shape(H(H({},se),{},{type:n().oneOf([B.LAYER_TYPE.LABELS]).isRequired})),be=n().shape(H(H({},se),{},{type:n().oneOf([B.LAYER_TYPE.POLY_LABELS]).isRequired})),Re=n().oneOfType([z,le,K,be]);var xe=i("./components/hooks/useIsSafari.js"),J=s.createElement;function me(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,o)}return t}function Be(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?me(Object(t),!0).forEach(function(o){(0,M.default)(r,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):me(Object(t)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))})}return r}const{RIGHT:je,BOTTOM:Q,LEFT:_,TOP:q,CENTER:F}=B.LABEL_LAYER_POSITION;function ae({id:r,featureId:e,filter:t,label:o,onFeatureClick:a,onFeatureHover:T,position:d,projection:p,source:S,style:u,transform:m,visibleFeatures:O,dotStyle:N}){const{fill:R="black",height:c=7,stroke:I="white",strokeWidth:f="1.2px",textShadow:j=!0,textStyle:C,width:w=7}=u??{},$=(0,xe.default)();return J(s.Fragment,null,J(v(),{id:"1072211821",dynamic:[Q,_,q,F,F,F]},[".label-layer.shadow:not(.safari) .label{text-shadow: 1px 1px 2px #fff, -1px -1px 2px #fff, 1px -1px 2px #fff, -1px 1px 2px #fff;}",".label-layer.shadow.safari .label text{paint-order:stroke;stroke:#fff;stroke-width:calc(3px * var(--scale));}",".label-layer .label:is(rect,circle){-webkit-transform:scale(var(--scale,1));-ms-transform:scale(var(--scale,1));transform:scale(var(--scale,1));stroke-width:calc(3px * var(--scale));}",".label-layer .label text{--x-offset:10px;--y-offset:7px;font-size:calc(0.875rem * var(--scale,1));-webkit-transform:translate( calc(var(--x-offset) * var(--scale,1)), calc(var(--y-offset) * var(--scale,1)) );-ms-transform:translate( calc(var(--x-offset) * var(--scale,1)), calc(var(--y-offset) * var(--scale,1)) );transform:translate( calc(var(--x-offset) * var(--scale,1)), calc(var(--y-offset) * var(--scale,1)) );}",".label-layer.circle .label text{--x-offset:9px;--y-offset:5px;}",`.label-layer .label[data-position='${Q}'] text{--x-offset:0px;--y-offset:16px;text-anchor:middle;}`,`.label-layer .label[data-position='${_}'] text{--x-offset:-11px;--y-offset:5px;text-anchor:end;}`,`.label-layer .label[data-position='${q}'] text{--x-offset:0px;--y-offset:-8px;text-anchor:middle;}`,`.label-layer .label[data-position='${F}'] rect{display:none;}`,`.label-layer .label[data-position='${F}'] circle{display:none;}`,`.label-layer .label[data-position='${F}'] text{--x-offset:0px;--y-offset:6px;text-anchor:middle;}`]),J("g",{"data-testid":`layer-${r}`,transform:m,className:v().dynamic([["1072211821",[Q,_,q,F,F,F]]])+" "+(k()("label-layer",r,{safari:$,shadow:j,circle:N==="circle"})||"")},O.map(Z=>{const g=S.features[Z];if(t&&!t(g,m.k))return null;const te=e?.(g)??Z;return J("g",{"data-position":(0,A.default)(d)?d(g):d,"data-feature-id":te,key:te,transform:`translate(${p(g.geometry.coordinates)})`,className:v().dynamic([["1072211821",[Q,_,q,F,F,F]]])+" label"},N==="rect"?J("rect",{fill:(0,A.default)(R)?R(g):R,stroke:(0,A.default)(I)?I(g):I,strokeWidth:(0,A.default)(f)?f(g):f,width:(0,A.default)(w)?w(g):w,height:(0,A.default)(c)?c(g):c,onMouseMove:T&&(U=>T(U,g)),onClick:a&&(U=>a(U,g)),className:v().dynamic([["1072211821",[Q,_,q,F,F,F]]])}):J("circle",{fill:(0,A.default)(R)?R(g):R,stroke:(0,A.default)(I)?I(g):I,strokeWidth:2/m.k,r:5/m.k,onMouseMove:T&&(U=>T(U,g)),onClick:a&&(U=>a(U,g)),className:v().dynamic([["1072211821",[Q,_,q,F,F,F]]])}),J("text",{style:(0,A.default)(C)?C(g):C,className:v().dynamic([["1072211821",[Q,_,q,F,F,F]]])+" founders-mono black pe-none"},(0,A.default)(o)?o(g):o))})))}ae.propTypes=Be({},se),ae.defaultProps={id:"label",featureId:null,filter:null,label:null,style:null,position:je,dotStyle:"rect"};var Ce=i("./node_modules/polylabel/polylabel.js"),De=i.n(Ce),we=i("./node_modules/@turf/intersect/dist/es/index.js"),ke=i("./node_modules/@turf/area/dist/es/index.js"),Ye=i("./node_modules/turf-polygon/index.js"),We=i.n(Ye),de=i("./node_modules/topojson-client/src/feature.js"),He=s.createElement;function Pe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,o)}return t}function Se(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Pe(Object(t),!0).forEach(function(o){(0,M.default)(r,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Pe(Object(t)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))})}return r}const ze=r=>{let e=0,t=null;return r.geometry.coordinates.forEach(o=>{const a=(0,ke.default)(We()(o));a<e||(e=a,t=o)}),t},Ie=r=>{const e=r.geometry.type==="MultiPolygon"?ze(r):r.geometry.coordinates,t=De()(e);return{type:"Feature",properties:r.properties,geometry:{type:"Point",coordinates:[t[0],t[1]]}}};function fe(r){const{projection:e,source:t,objectKey:o,width:a,height:T}=r,d=(0,s.useMemo)(()=>new Y.default({x:0,y:0,width:a,height:T}).unproject(e),[e,a,T]),p=(0,s.useMemo)(()=>de.default(t,t.objects[o]).features.map(O=>{if(["AK","HI"].includes(O.properties.STUSPS))return Ie(O);const N=(0,we.default)(O,d,{properties:O.properties});return N?Ie(N):null}).filter(O=>O),[d]),S=Se(Se({},r),{},{overflow:!1,visibleFeatures:Array.from(Array(p.length).keys()),source:{type:"FeatureCollection",features:p}});return He(ae,S)}fe.displayName="PolyLabelLayer";class Ge{constructor(e,t,o,a=100){this.id=e,this.width=t,this.height=o,this.zoomBehavior=this.createZoomBehavior(t,o,a),this.currentTransform=P.zoomIdentity,this.onTransformCallbacks=new Set}get map(){return b.default(`#${this.id}`)}get zoomLevel(){const e=this.map.node();return e?P.zoomTransform(e).k:1}createZoomBehavior(e,t,o){return P.zoom().filter(a=>{const T=a.targetTouches?.length>1,d=a.type==="wheel"&&!T&&!a.ctrlKey,p=!T&&a.type==="touchstart";return this.currentTransform&&this.currentTransform.k>1||!(d||p)}).extent([[0,0],[e,t]]).translateExtent([[0,0],[e,t]]).scaleExtent([1,o]).on("zoom",({transform:a})=>{this.currentTransform=a,this.onTransformCallbacks.forEach(T=>T(a))})}zoomIn(){this.map.transition().duration(750).call(this.zoomBehavior.scaleBy,2)}zoomOut(){this.map.transition().duration(750).call(this.zoomBehavior.scaleBy,.5)}zoomToTransform({x:e,y:t,k:o}){const a=new P.ZoomTransform(o,e,t);this.map.transition().duration(750).call(this.zoomBehavior.transform,a)}zoomToBoundingBox(e){const t=this.transformForBoundingBox(e);this.zoomToTransform(t)}transformForBoundingBox(e){const t=Math.min(8,.9/Math.max(e.width/this.width,e.height/this.height)),o=-(e.x+e.width/2)*t+this.width/2,a=-(e.y+e.height/2)*t+this.height/2;return{x:o,y:a,k:t}}resetZoom(){this.map.transition().duration(750).call(this.zoomBehavior.transform,P.zoomIdentity.scale(1))}onTransform(e){return this.onTransformCallbacks.add(e),()=>this.onTransformCallbacks.delete(e)}}const Ke=Ge;var Ze=i("./components/ElectionMap/ZoomHandler.js"),ie=s.createElement;function Ne(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,o)}return t}function Ue(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ne(Object(t),!0).forEach(function(o){(0,M.default)(r,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))})}return r}function Oe({featureId:r,geoFeatures:e,geoPath:t,id:o,selectedFeature:a,style:T,transform:d,visibleFeatures:p}){const{fill:S="#ccc",fillOpacity:u="1",stroke:m="white",hoverStroke:O="white",strokeWidth:N=1,hoverStrokeWidth:R=4,strokeLinecap:c="butt",strokeLinejoin:I="round"}=T??{},f=(0,s.useRef)(null),j=(0,s.useMemo)(()=>p.map(Z=>e[Z]).sort((Z,g)=>(Z.properties.zIndex||0)-(g.properties.zIndex||0)),[e,p]);(0,s.useEffect)(()=>{b.default(f.current).selectAll("path").data(j,r).join("path").attr("d",$=>$.path).attr("fill",S).attr("fill-opacity",u).attr("stroke-linejoin",I).attr("stroke-linecap",c).attr("data-cd-geoid",r).attr("stroke-width",(0,A.default)(N)?N:`calc(${N}px * var(--scale))`).attr("stroke",m)},[r,j,S,m]);const C=a&&e.find(w=>r(w)===r(a));return ie(s.Fragment,null,ie("g",{ref:f,"data-testid":`layer-${o}`,className:"geometries",transform:d}),C&&ie("g",{transform:d},ie("path",{stroke:(0,A.default)(O)?O(C):O,fill:"transparent","data-testid":`layer-${o}-${r(C)}`,strokeWidth:(0,A.default)(R)?R(C):`calc(${R}px * var(--scale))`,d:t(C)})))}Oe.propTypes=Ue({},ne),Oe.defaultProps={id:"geo",featureId:r=>r.properties.GEOID,objectKey:null,style:null,zoomable:!1};var Ve=i("./node_modules/d3-geo/src/contains.js"),ge=s.createElement;function he(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,o)}return t}function $e(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?he(Object(t),!0).forEach(function(o){(0,M.default)(r,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):he(Object(t)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))})}return r}function pe({featureIndex:r,filter:e,geoFeatures:t,height:o,id:a,onFeatureClick:T,onFeatureHover:d,projection:p,transform:S,width:u}){const m=(0,s.useCallback)(c=>{const I=c.currentTarget.getBoundingClientRect();let{clientX:f,clientY:j}=c;c.touches&&(f=c.touches[0].clientX,j=c.touches[0].clientY);const C=f-I.x,w=j-I.y,$=C/S.k,Z=w/S.k;return{x:$,y:Z}},[S.k]),O=(0,s.useCallback)(({x:c,y:I})=>{const f=p.invert([c,I]);return r.search({boundingBox:[c,I,c,I],width:u,height:o,filter:e&&(C=>e(t[C]))}).map(C=>t[C]).find(C=>Ve.default(C,f))},[r,e,t,p,u,o]),N=c=>{const I=m(c),f=O(I);T?.(c,f)},R=(0,s.useCallback)(c=>{const I=m(c),f=O(I);d?.(c,f)},[m,O,d]);return ge("g",{className:"interaction",transform:S,"data-testid":`layer-${a}`,onMouseMove:R,onClick:N,onBlur:c=>c.preventDefault()},ge("rect",{x:"0",y:"0",height:o,width:u,fill:"transparent"}))}pe.displayName="InteractiveLayer",pe.propTypes=$e({},G),pe.defaultProps={filter:void 0,id:"interactive",featureId:r=>r.properties.GEOID,objectKey:null,onFeatureClick:null,onFeatureHover:null,zoomable:!1};var ce=i("./node_modules/topojson-simplify/src/index.js");function Me(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(r,a).enumerable})),t.push.apply(t,o)}return t}function Fe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Me(Object(t),!0).forEach(function(o){(0,M.default)(r,o,t[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Me(Object(t)).forEach(function(o){Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o))})}return r}const ee={ZOOMED_OUT:"zoomed-out",MID:"mid",ZOOMED_IN:"zoomed-in"};function Xe({k:r,enabled:e}){return(0,s.useMemo)(()=>r>3||!e?ee.ZOOMED_IN:r>1.5?ee.MID:ee.ZOOMED_OUT,[r,e])}function Je({layers:r,geoPath:e,enableZoom:t}){const o=(0,s.useRef)(new Map),a=(0,s.useRef)(null);return(0,s.useMemo)(()=>{const T=new Map;function d({topojson:p,minWeight:S,objectKey:u}){const m=ce.simplify(p,S),{objects:O}=m,N=O[u]??Object.values(O)[0];return de.default(p,N).features.map(c=>{const I=e(c);return Fe(Fe({},c),{},{path:I})})}return r.forEach(({source:p,type:S,objectKey:u})=>{if(!B.LAYERS_WITH_SIMPLIFICATION.includes(S)||T.has(p))return;const m=o.current.get(p);if(m&&e===a.current){T.set(p,m);return}if(!t){T.set(p,{[ee.ZOOMED_IN]:d({topojson:p,minWeight:0,objectKey:u})});return}const O=ce.presimplify(p),N=ce.quantile(O,.05),R=ce.quantile(O,.1),c=0;T.set(p,{[ee.ZOOMED_OUT]:d({topojson:O,minWeight:N,objectKey:u}),[ee.MID]:d({topojson:O,minWeight:R,objectKey:u}),[ee.ZOOMED_IN]:d({topojson:O,minWeight:c,objectKey:u})})}),o.current=T,a.current=e,T},[r,e])}function Qe({featureIndexes:r,width:e,height:t,boundingBox:o}){return(0,s.useMemo)(()=>{const a=new Map;return r.forEach((T,d)=>{a.set(d,T.search({boundingBox:o,height:t,width:e}))}),a},[r,o,t,e])}var _e=i("./node_modules/flatbush/index.js");const qe=(r,e)=>{const t=new _e.default(e.length);return e.forEach(({bbox:o})=>{t.add(Math.floor(o.x0),Math.floor(o.y0),Math.ceil(o.x1),Math.ceil(o.y1))}),t.finish(),t};var et=i("./node_modules/console-browserify/index.js");class tt{constructor({geoPath:e,width:t,height:o,features:a}){(0,M.default)(this,"geoPath",void 0),(0,M.default)(this,"width",void 0),(0,M.default)(this,"height",void 0),(0,M.default)(this,"features",void 0),(0,M.default)(this,"index",void 0),this.geoPath=e,this.width=t,this.height=o,this.features=a,this.index=this.buildIndex()}buildIndex(){const e=this.features.map(t=>({bbox:new Y.default(this.geoPath.bounds(t))}));return qe(this.geoPath,e)}search({boundingBox:e,width:t,height:o,filter:a}){const T=(this.width/t).toPrecision(4),d=(this.height/o).toPrecision(4);T!==d&&et.error("FeatureIndex does not support searches across different aspect ratios. Recreate FeatureIndex.");let p,S,u,m;return Array.isArray(e)?[p,S,u,m]=e:{x:p,y:S,x1:u,y1:m}=e,this.index.search(p*T,S*d,u*T,m*d,a)}}function ot({layers:r,geoPath:e,width:t,height:o}){const a=(0,s.useRef)(new Map),T=(0,s.useRef)((t/o).toPrecision(4));return(0,s.useMemo)(()=>{const d=(t/o).toPrecision(4),p=new Map,S=d!==T.current;return r.forEach(({source:u,type:m,objectKey:O})=>{if(!B.LAYERS_WITH_TOPOLOGY.includes(m)||p.has(u))return;const N=a.current.get(u);if(!S&&N){p.set(u,N);return}const R=u.type==="FeatureCollection",c=R?u:u.objects[O]??Object.values(u.objects)[0],I=R?c:de.default(u,c);p.set(u,new tt({geoPath:e,width:t,height:o,features:I.features}))}),a.current=p,T.current=d,p},[e,o,r,t])}var rt=i("./components/helpers/analytics.js"),V=s.createElement;const nt=({x:r,y:e,k:t},o,a)=>new Y.default({x:-r/t,y:-e/t,width:o/t,height:a/t}),ye=({id:r,enableZoom:e,enableCompression:t,height:o,layers:a,projection:T,selectedFeature:d,width:p,zoomHandler:S,zoomTo:u,backgroundColor:m,maxZoomLevel:O})=>{const N=(0,s.useRef)(null),{setReference:R}=(0,rt.useMapAnalytics)(),{0:c,1:I}=(0,s.useState)(P.zoomIdentity),f=(0,s.useMemo)(()=>E.default().projection(T),[T]),j=(0,s.useMemo)(()=>new Ke(r,p,o,O),[o,p,O]);(0,s.useEffect)(()=>{if(!e)return;const h=j.onTransform(Ee=>{I(Ee)}),oe=S?.attach(j);return()=>{h(),oe?.()}},[j,e,S]);const C=h=>{a.filter(oe=>oe.type===B.LAYER_TYPE.INTERACTIVE).forEach(oe=>{oe?.onFeatureHover(h,null)})};(0,s.useEffect)(()=>{if(!N.current)return;const h=b.default(N.current);e&&h.call(j.zoomBehavior)},[e,j]);const w=(0,s.useMemo)(()=>nt(c,p,o),[c,p,o]),$=d?"pointer":"default";b.default(N.current).style("cursor",$);const Z=Xe({k:c.k,enabled:t&&e}),g=300/c.k,{0:te,1:U}=(0,s.useState)(w.addOffset(g));(0,s.useEffect)(()=>{if(!te.contains(w)){const h=w.addOffset(g);U(h)}},[w]),(0,s.useEffect)(()=>{const h=w.addOffset(g);U(h)},[Z]),(0,s.useEffect)(()=>{if(u)if(u instanceof Y.default){const h=u.project(T);j.zoomToBoundingBox(h)}else{const h=u.bbox||new Y.default(f.bounds(u));j.zoomToBoundingBox(h)}else j.resetZoom()},[u,f,T,j]);const Le=ot({layers:a,geoPath:f,width:p,height:o}),at=Qe({featureIndexes:Le,width:p,height:o,boundingBox:te}),it=Je({layers:a,geoPath:f,enableZoom:e});return V("div",{ref:R,onMouseLeave:C,className:v().dynamic([["106036818",[1/c.k]]])+" map-container"},V(v(),{id:"106036818",dynamic:[1/c.k]},[`.map-container.__jsx-style-dynamic-selector{--scale:${1/c.k};}`]),V("svg",{ref:N,height:o,width:p,id:j.id,className:v().dynamic([["106036818",[1/c.k]]])+" db"},m&&V("rect",{x:"0",y:"0",height:o,width:p,fill:m,className:v().dynamic([["106036818",[1/c.k]]])}),a.map((h,oe)=>{const{id:Ee}=h,Te=Ee||oe,pt=Le.get(h.source),Ae=at.get(h.source),ve=it.get(h.source)?.[Z];switch(h.type){case B.LAYER_TYPE.GEO:return V(Oe,(0,y.default)({},h,{geoFeatures:ve,geoPath:f,key:Te,currentBoundingBox:w,selectedFeature:d,transform:c,visibleFeatures:Ae}));case B.LAYER_TYPE.LABELS:return V(ae,(0,y.default)({},h,{key:Te,geoPath:f,projection:T,transform:c,boundingBox:te,width:p,height:o,visibleFeatures:Ae}));case B.LAYER_TYPE.POLY_LABELS:return V(fe,(0,y.default)({},h,{key:Te,geoPath:f,projection:T,transform:c,boundingBox:te,width:p,height:o,visibleFeatures:Ae}));case B.LAYER_TYPE.INTERACTIVE:return V(pe,(0,y.default)({},h,{geoFeatures:ve,key:Te,geoPath:f,featureIndex:pt,transform:c,projection:T,height:o,width:p}));default:return null}})))};ye.displayName="ElectionMap",ye.propTypes={enableZoom:n().bool,enableCompression:n().bool,height:n().oneOfType([n().string,n().number]).isRequired,layers:n().arrayOf(Re).isRequired,maxZoomLevel:n().number,selectedFeature:n().object,projection:n().func,width:n().oneOfType([n().string,n().number]).isRequired,zoomHandler:n().instanceOf(Ze.ZoomHandler),zoomTo:n().object,id:n().string},ye.defaultProps={enableZoom:!1,enableCompression:!0,maxZoomLevel:void 0,projection:l.default(),selectedFeature:null,zoomHandler:null,zoomTo:null,id:"election-map"};const st=ye},"./components/ElectionMap/MapBoundingBox.js":(re,L,i)=>{i.r(L),i.d(L,{default:()=>D});class y{constructor(s){if(Array.isArray(s)){const[[E,l],[P,b]]=s;this.x=E,this.y=l,this.width=P-E,this.height=b-l}else this.width=s.width,this.height=s.height,this.x=s.x,this.y=s.y}get x0(){return this.x}get y0(){return this.y}get x1(){return this.x+this.width}get y1(){return this.y+this.height}contains(s){return s.x0>this.x0&&s.x1<this.x1&&s.y0>this.y0&&s.y1<this.y1}addOffset(s){return new y({x:this.x-s,y:this.y-s,width:this.width+2*s,height:this.height+2*s})}project(s){const E=s([this.x0,this.y0]),l=s([this.x1,this.y1]);return new y([E,l])}unproject(s){const E=s.invert([this.x0,this.y0]),l=s.invert([this.x1,this.y0]),P=s.invert([this.x1,this.y1]),b=s.invert([this.x0,this.y1]);return{type:"Polygon",coordinates:[[[E,l,P,b,E]]]}}toGeoJSON(){return{type:"Polygon",coordinates:[[[this.x0,this.y0],[this.x0,this.y1],[this.x1,this.y1],[this.x1,this.y0],[this.x0,this.y0]]]}}static merge(s){let E=1/0,l=-1/0,P=-1/0,b=1/0;return s.forEach(({x,y:n,width:Y,height:M})=>{x<E&&(E=x),n+M>l&&(l=n+M),x+Y>P&&(P=x+Y),n<b&&(b=n)}),new y({x:E,y:b,width:P-E,height:l-b})}}const D=y},"./components/ElectionMap/ZoomHandler.js":(re,L,i)=>{i.r(L),i.d(L,{ZoomHandler:()=>v,useZoomHandler:()=>s});var y=i("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),D=i("./node_modules/next/dist/compiled/react/index.js");class v{constructor(){(0,y.default)(this,"mapController",null),(0,y.default)(this,"onTransformCallbacks",new Set),(0,y.default)(this,"onAttachCallbacks",new Set),(0,y.default)(this,"handleTransform",l=>{this.onTransformCallbacks.forEach(P=>P(l))})}onTransform(l){return this.onTransformCallbacks.add(l),()=>this.onTransformCallbacks.delete(l)}onAttach(l){return this.onAttachCallbacks.add(l),()=>this.onAttachCallbacks.delete(l)}get zoomLevel(){return this.mapController?.zoomLevel??1}get attached(){return!!this.mapController}zoomIn(){this.mapController?.zoomIn()}zoomOut(){this.mapController?.zoomOut()}reset(){this.mapController?.resetZoom()}attach(l){return this.detach(),this.mapController=l,this.onAttachCallbacks.forEach(P=>P({attached:!0})),this.handleTransform(l.currentTransform),l.onTransform(this.handleTransform),()=>{this.detach()}}detach(){this.mapController?.onTransformCallbacks.delete(this.handleTransform)&&(this.mapController=null,this.onAttachCallbacks.forEach(l=>l({attached:!1})))}}function s(){const E=(0,D.useMemo)(()=>new v,[]),{0:l,1:P}=(0,D.useState)(E.zoomLevel),{0:b,1:x}=(0,D.useState)(!1);return(0,D.useEffect)(()=>{const n=E.onTransform(M=>{P(M.k)}),Y=E.onAttach(({attached:M})=>{x(M)});return()=>{n(),Y()}},[E]),{attached:b,zoomLevel:l,zoomHandler:E}}},"./components/ElectionMap/constants.js":(re,L,i)=>{i.r(L),i.d(L,{LABEL_LAYER_POSITION:()=>P,LAYERS_WITH_SIMPLIFICATION:()=>l,LAYERS_WITH_TOPOLOGY:()=>E,LAYER_TYPE:()=>s,STATE_SCALE_FACTOR_THRESHOLD:()=>D,STATE_THRESHOLD_OVERRIDES:()=>v,citiesLayer:()=>b});const y=JSON.parse('{"type":"FeatureCollection","features":[{"geometry":{"coordinates":[-149.8631,61.2174],"type":"Point"},"properties":{"NAME":"Anchorage","POSITION":"R","STATE":"AK"},"type":"Feature"},{"geometry":{"coordinates":[-147.716,64.8377778],"type":"Point"},"properties":{"NAME":"Fairbanks","POSITION":"R","STATE":"AK"},"type":"Feature"},{"geometry":{"coordinates":[-134.13,58.39],"type":"Point"},"properties":{"NAME":"Juneau","POSITION":"R","STATE":"AK"},"type":"Feature"},{"geometry":{"coordinates":[-86.75,33.57],"type":"Point"},"properties":{"NAME":"Birmingham","POSITION":"R","STATE":"AL"},"type":"Feature"},{"geometry":{"coordinates":[-86.586,34.7303688],"type":"Point"},"properties":{"NAME":"Huntsville","POSITION":"R","STATE":"AL"},"type":"Feature"},{"geometry":{"coordinates":[-88.043,30.6943566],"type":"Point"},"properties":{"NAME":"Mobile","POSITION":"T","STATE":"AL"},"type":"Feature"},{"geometry":{"coordinates":[-86.28,32.35],"type":"Point"},"properties":{"NAME":"Montgomery","POSITION":"B","STATE":"AL"},"type":"Feature"},{"geometry":{"coordinates":[-94.161,36.0764],"type":"Point"},"properties":{"NAME":"Fayetteville","POSITION":"T","STATE":"AR"},"type":"Feature"},{"geometry":{"coordinates":[-93,34.5],"type":"Point"},"properties":{"NAME":"Hot Springs","POSITION":"L","STATE":"AR"},"type":"Feature"},{"geometry":{"coordinates":[-90.694,35.8281],"type":"Point"},"properties":{"NAME":"Jonesboro","POSITION":"R","STATE":"AR"},"type":"Feature"},{"geometry":{"coordinates":[-92.35,34.72],"type":"Point"},"properties":{"NAME":"Little Rock","POSITION":"T","STATE":"AR"},"type":"Feature"},{"geometry":{"coordinates":[-111.639,35.2013516],"type":"Point"},"properties":{"NAME":"Flagstaff","POSITION":"R","STATE":"AZ"},"type":"Feature"},{"geometry":{"coordinates":[-112.02,33.43],"type":"Point"},"properties":{"NAME":"Phoenix","POSITION":"B","STATE":"AZ"},"type":"Feature"},{"geometry":{"coordinates":[-110.93,32.12],"type":"Point"},"properties":{"NAME":"Tucson","POSITION":"R","STATE":"AZ"},"type":"Feature"},{"geometry":{"coordinates":[-114.628,32.6926512],"type":"Point"},"properties":{"NAME":"Yuma","POSITION":"R","STATE":"AZ"},"type":"Feature"},{"geometry":{"coordinates":[-119.018715,35.373291],"type":"Point"},"properties":{"NAME":"Bakersfield","POSITION":"R","STATE":"CA"},"type":"Feature"},{"geometry":{"coordinates":[-119.787125,36.737797],"type":"Point"},"properties":{"NAME":"Fresno","POSITION":"R","STATE":"CA"},"type":"Feature"},{"geometry":{"coordinates":[-118.237,34.05282],"type":"Point"},"properties":{"NAME":"Los Angeles","POSITION":"B","STATE":"CA"},"type":"Feature"},{"geometry":{"coordinates":[-121.5,38.52],"type":"Point"},"properties":{"NAME":"Sacramento","POSITION":"T","STATE":"CA"},"type":"Feature"},{"geometry":{"coordinates":[-117.17,32.73],"type":"Point"},"properties":{"NAME":"San Diego","POSITION":"L","STATE":"CA"},"type":"Feature"},{"geometry":{"coordinates":[-122.422,37.77302],"type":"Point"},"properties":{"NAME":"San Francisco","POSITION":"L","STATE":"CA"},"type":"Feature"},{"geometry":{"coordinates":[-121.92,37.37],"type":"Point"},"properties":{"NAME":"San Jose","POSITION":"R","STATE":"CA"},"type":"Feature"},{"geometry":{"coordinates":[-104.72,38.82],"type":"Point"},"properties":{"NAME":"Colorado Springs","POSITION":"B","STATE":"CO"},"type":"Feature"},{"geometry":{"coordinates":[-104.984,39.7375],"type":"Point"},"properties":{"NAME":"Denver","POSITION":"L","STATE":"CO"},"type":"Feature"},{"geometry":{"coordinates":[-105.078,40.5592],"type":"Point"},"properties":{"NAME":"Fort Collins","POSITION":"T","STATE":"CO"},"type":"Feature"},{"geometry":{"coordinates":[-108.551,39.0638705],"type":"Point"},"properties":{"NAME":"Grand Junction","POSITION":"T","STATE":"CO"},"type":"Feature"},{"geometry":{"coordinates":[-73.2,41.2],"type":"Point"},"properties":{"NAME":"Bridgeport","POSITION":"T","STATE":"CT"},"type":"Feature"},{"geometry":{"coordinates":[-72.684,41.765],"type":"Point"},"properties":{"NAME":"Hartford","POSITION":"R","STATE":"CT"},"type":"Feature"},{"geometry":{"coordinates":[-72.9,41.3],"type":"Point"},"properties":{"NAME":"New Haven","POSITION":"R","STATE":"CT"},"type":"Feature"},{"geometry":{"coordinates":[-73.539,41.0528],"type":"Point"},"properties":{"NAME":"Stamford","POSITION":"R","STATE":"CT"},"type":"Feature"},{"geometry":{"coordinates":[-77.035,38.890159],"type":"Point"},"properties":{"NAME":"Washington","POSITION":"R","STATE":"DC"},"type":"Feature"},{"geometry":{"coordinates":[-75.428,38.9126],"type":"Point"},"properties":{"NAME":"Milford","POSITION":"R","STATE":"DE"},"type":"Feature"},{"geometry":{"coordinates":[-75.547,39.7458],"type":"Point"},"properties":{"NAME":"Wilmington","POSITION":"R","STATE":"DE"},"type":"Feature"},{"geometry":{"coordinates":[-81.6557,30.3322],"type":"Point"},"properties":{"NAME":"Jacksonville","POSITION":"R","STATE":"FL"},"type":"Feature"},{"geometry":{"coordinates":[-80.1918,25.7617],"type":"Point"},"properties":{"NAME":"Miami","POSITION":"B","STATE":"FL"},"type":"Feature"},{"geometry":{"coordinates":[-81.3792,28.5383],"type":"Point"},"properties":{"NAME":"Orlando","POSITION":"R","STATE":"FL"},"type":"Feature"},{"geometry":{"coordinates":[-84.2807,30.4383],"type":"Point"},"properties":{"NAME":"Tallahassee","POSITION":"B","STATE":"FL"},"type":"Feature"},{"geometry":{"coordinates":[-82.4572,27.9506],"type":"Point"},"properties":{"NAME":"Tampa","POSITION":"R","STATE":"FL"},"type":"Feature"},{"geometry":{"coordinates":[-84.388,33.749],"type":"Point"},"properties":{"NAME":"Atlanta","POSITION":"B","STATE":"GA"},"type":"Feature"},{"geometry":{"coordinates":[-82.0105,33.4735],"type":"Point"},"properties":{"NAME":"Augusta","POSITION":"R","STATE":"GA"},"type":"Feature"},{"geometry":{"coordinates":[-84.9877,32.461],"type":"Point"},"properties":{"NAME":"Columbus","POSITION":"R","STATE":"GA"},"type":"Feature"},{"geometry":{"coordinates":[-83.6324,32.8407],"type":"Point"},"properties":{"NAME":"Macon","POSITION":"R","STATE":"GA"},"type":"Feature"},{"geometry":{"coordinates":[-81.0912,32.0809],"type":"Point"},"properties":{"NAME":"Savannah","POSITION":"B","STATE":"GA"},"type":"Feature"},{"geometry":{"coordinates":[-157.8583,21.3069],"type":"Point"},"properties":{"NAME":"Honolulu","POSITION":"R","STATE":"HI"},"type":"Feature"},{"geometry":{"coordinates":[-91.666,41.977879],"type":"Point"},"properties":{"NAME":"Cedar Rapids","POSITION":"L","STATE":"IA"},"type":"Feature"},{"geometry":{"coordinates":[-90.578,41.533643],"type":"Point"},"properties":{"NAME":"Davenport","POSITION":"T","STATE":"IA"},"type":"Feature"},{"geometry":{"coordinates":[-93.617,41.576],"type":"Point"},"properties":{"NAME":"Des Moines","POSITION":"B","STATE":"IA"},"type":"Feature"},{"geometry":{"coordinates":[-96.4,42.4949942],"type":"Point"},"properties":{"NAME":"Sioux City","POSITION":"R","STATE":"IA"},"type":"Feature"},{"geometry":{"coordinates":[-116.2023,43.615],"type":"Point"},"properties":{"NAME":"Boise","POSITION":"B","STATE":"ID"},"type":"Feature"},{"geometry":{"coordinates":[-112.0408,43.4927],"type":"Point"},"properties":{"NAME":"Idaho Falls","POSITION":"T","STATE":"ID"},"type":"Feature"},{"geometry":{"coordinates":[-112.4506,42.8621],"type":"Point"},"properties":{"NAME":"Pocatello","POSITION":"B","STATE":"ID"},"type":"Feature"},{"geometry":{"coordinates":[-87.6298,41.8781],"type":"Point"},"properties":{"NAME":"Chicago","POSITION":"R","STATE":"IL"},"type":"Feature"},{"geometry":{"coordinates":[-88.08,41.53],"type":"Point"},"properties":{"NAME":"Joliet","POSITION":"L","STATE":"IL"},"type":"Feature"},{"geometry":{"coordinates":[-89.589,40.6936],"type":"Point"},"properties":{"NAME":"Peoria","POSITION":"R","STATE":"IL"},"type":"Feature"},{"geometry":{"coordinates":[-89.094,42.271],"type":"Point"},"properties":{"NAME":"Rockford","POSITION":"L","STATE":"IL"},"type":"Feature"},{"geometry":{"coordinates":[-89.6501,39.7817],"type":"Point"},"properties":{"NAME":"Springfield","POSITION":"R","STATE":"IL"},"type":"Feature"},{"geometry":{"coordinates":[-87.5711,37.9716],"type":"Point"},"properties":{"NAME":"Evansville","POSITION":"T","STATE":"IN"},"type":"Feature"},{"geometry":{"coordinates":[-85.1394,41.0793],"type":"Point"},"properties":{"NAME":"Fort Wayne","POSITION":"B","STATE":"IN"},"type":"Feature"},{"geometry":{"coordinates":[-86.1581,39.7684],"type":"Point"},"properties":{"NAME":"Indianapolis","POSITION":"B","STATE":"IN"},"type":"Feature"},{"geometry":{"coordinates":[-86.252,41.6764],"type":"Point"},"properties":{"NAME":"South Bend","POSITION":"B","STATE":"IN"},"type":"Feature"},{"geometry":{"coordinates":[-95.2353,38.9717],"type":"Point"},"properties":{"NAME":"Lawrence","POSITION":"B","STATE":"KS"},"type":"Feature"},{"geometry":{"coordinates":[-95.6752,39.0473],"type":"Point"},"properties":{"NAME":"Topeka","POSITION":"L","STATE":"KS"},"type":"Feature"},{"geometry":{"coordinates":[-97.3148,37.6979],"type":"Point"},"properties":{"NAME":"Wichita","POSITION":"T","STATE":"KS"},"type":"Feature"},{"geometry":{"coordinates":[-86.4808,36.9685],"type":"Point"},"properties":{"NAME":"Bowling Green","POSITION":"R","STATE":"KY"},"type":"Feature"},{"geometry":{"coordinates":[-84.8733,38.2009],"type":"Point"},"properties":{"NAME":"Frankfort","POSITION":"T","STATE":"KY"},"type":"Feature"},{"geometry":{"coordinates":[-84.5037,38.0406],"type":"Point"},"properties":{"NAME":"Lexington","POSITION":"B","STATE":"KY"},"type":"Feature"},{"geometry":{"coordinates":[-85.7584,38.2527],"type":"Point"},"properties":{"NAME":"Louisville","POSITION":"L","STATE":"KY"},"type":"Feature"},{"geometry":{"coordinates":[-86.7816,36.1627],"type":"Point"},"properties":{"NAME":"Nashville","POSITION":"T","STATE":"KY"},"type":"Feature"},{"geometry":{"coordinates":[-91.1473,30.4711],"type":"Point"},"properties":{"NAME":"Baton Rouge","POSITION":"T","STATE":"LA"},"type":"Feature"},{"geometry":{"coordinates":[-92.0198,30.2241],"type":"Point"},"properties":{"NAME":"Lafayette","POSITION":"B","STATE":"LA"},"type":"Feature"},{"geometry":{"coordinates":[-90.0715,29.9511],"type":"Point"},"properties":{"NAME":"New Orleans","POSITION":"B","STATE":"LA"},"type":"Feature"},{"geometry":{"coordinates":[-93.7502,32.5252],"type":"Point"},"properties":{"NAME":"Shreveport","POSITION":"R","STATE":"LA"},"type":"Feature"},{"geometry":{"coordinates":[-71.0589,42.3601],"type":"Point"},"properties":{"NAME":"Boston","POSITION":"R","STATE":"MA"},"type":"Feature"},{"geometry":{"coordinates":[-71.0184,42.0834],"type":"Point"},"properties":{"NAME":"Brockton","POSITION":"R","STATE":"MA"},"type":"Feature"},{"geometry":{"coordinates":[-71.3162,42.6334],"type":"Point"},"properties":{"NAME":"Lowell","POSITION":"R","STATE":"MA"},"type":"Feature"},{"geometry":{"coordinates":[-72.5898,42.1015],"type":"Point"},"properties":{"NAME":"Springfield","POSITION":"T","STATE":"MA"},"type":"Feature"},{"geometry":{"coordinates":[-71.8023,42.2626],"type":"Point"},"properties":{"NAME":"Worcester","POSITION":"L","STATE":"MA"},"type":"Feature"},{"geometry":{"coordinates":[-76.46922,38.9784],"type":"Point"},"properties":{"NAME":"Annapolis","POSITION":"R","STATE":"MD"},"type":"Feature"},{"geometry":{"coordinates":[-76.6093,39.2992],"type":"Point"},"properties":{"NAME":"Baltimore","POSITION":"T","STATE":"MD"},"type":"Feature"},{"geometry":{"coordinates":[-75.52,39.16],"type":"Point"},"properties":{"NAME":"Dover","POSITION":"R","STATE":"MD"},"type":"Feature"},{"geometry":{"coordinates":[-77.1528,39.084],"type":"Point"},"properties":{"NAME":"Rockville","POSITION":"L","STATE":"MD"},"type":"Feature"},{"geometry":{"coordinates":[-69.7795,44.3106],"type":"Point"},"properties":{"NAME":"Augusta","POSITION":"T","STATE":"ME"},"type":"Feature"},{"geometry":{"coordinates":[-68.7712,44.8016],"type":"Point"},"properties":{"NAME":"Bangor","POSITION":"T","STATE":"ME"},"type":"Feature"},{"geometry":{"coordinates":[-70.2568,43.6591],"type":"Point"},"properties":{"NAME":"Portland","POSITION":"T","STATE":"ME"},"type":"Feature"},{"geometry":{"coordinates":[-83.743,42.2808],"type":"Point"},"properties":{"NAME":"Ann Arbor","POSITION":"B","STATE":"MI"},"type":"Feature"},{"geometry":{"coordinates":[-83.0458,42.3314],"type":"Point"},"properties":{"NAME":"Detroit","POSITION":"R","STATE":"MI"},"type":"Feature"},{"geometry":{"coordinates":[-85.6681,42.9634],"type":"Point"},"properties":{"NAME":"Grand Rapids","POSITION":"T","STATE":"MI"},"type":"Feature"},{"geometry":{"coordinates":[-84.5555,42.7325],"type":"Point"},"properties":{"NAME":"Lansing","POSITION":"B","STATE":"MI"},"type":"Feature"},{"geometry":{"coordinates":[-83.95,43.42],"type":"Point"},"properties":{"NAME":"Saginaw","POSITION":"T","STATE":"MI"},"type":"Feature"},{"geometry":{"coordinates":[-92.1005,46.7867],"type":"Point"},"properties":{"NAME":"Duluth","POSITION":"L","STATE":"MN"},"type":"Feature"},{"geometry":{"coordinates":[-93.265,44.9778],"type":"Point"},"properties":{"NAME":"Minneapolis","POSITION":"L","STATE":"MN"},"type":"Feature"},{"geometry":{"coordinates":[-92.4802,44.0121],"type":"Point"},"properties":{"NAME":"Rochester","POSITION":"R","STATE":"MN"},"type":"Feature"},{"geometry":{"coordinates":[-93.09,44.9537],"type":"Point"},"properties":{"NAME":"St. Paul","POSITION":"R","STATE":"MN"},"type":"Feature"},{"geometry":{"coordinates":[-92.3341,38.9517],"type":"Point"},"properties":{"NAME":"Columbia","POSITION":"T","STATE":"MO"},"type":"Feature"},{"geometry":{"coordinates":[-92.1735,38.5767],"type":"Point"},"properties":{"NAME":"Jefferson City","POSITION":"B","STATE":"MO"},"type":"Feature"},{"geometry":{"coordinates":[-94.5786,39.0997],"type":"Point"},"properties":{"NAME":"Kansas City","POSITION":"T","STATE":"MO"},"type":"Feature"},{"geometry":{"coordinates":[-93.2923,37.209],"type":"Point"},"properties":{"NAME":"Springfield","POSITION":"R","STATE":"MO"},"type":"Feature"},{"geometry":{"coordinates":[-90.1994,38.627],"type":"Point"},"properties":{"NAME":"St. Louis","POSITION":"R","STATE":"MO"},"type":"Feature"},{"geometry":{"coordinates":[-88.8853,30.396],"type":"Point"},"properties":{"NAME":"Biloxi","POSITION":"T","STATE":"MS"},"type":"Feature"},{"geometry":{"coordinates":[-90.1848,32.2988],"type":"Point"},"properties":{"NAME":"Jackson","POSITION":"B","STATE":"MS"},"type":"Feature"},{"geometry":{"coordinates":[88.7034,34.2576],"type":"Point"},"properties":{"NAME":"Tupelo","POSITION":"R","STATE":"MS"},"type":"Feature"},{"geometry":{"coordinates":[-108.5007,45.7833],"type":"Point"},"properties":{"NAME":"Billings","POSITION":"R","STATE":"MT"},"type":"Feature"},{"geometry":{"coordinates":[-111.0429,46.677],"type":"Point"},"properties":{"NAME":"Bozeman","POSITION":"R","STATE":"MT"},"type":"Feature"},{"geometry":{"coordinates":[-111.3008,47.5053],"type":"Point"},"properties":{"NAME":"Great Falls","POSITION":"R","STATE":"MT"},"type":"Feature"},{"geometry":{"coordinates":[-112.0391,46.5891],"type":"Point"},"properties":{"NAME":"Helena","POSITION":"B","STATE":"MT"},"type":"Feature"},{"geometry":{"coordinates":[-113.994,46.8721],"type":"Point"},"properties":{"NAME":"Missoula","POSITION":"R","STATE":"MT"},"type":"Feature"},{"geometry":{"coordinates":[-82.5515,35.5951],"type":"Point"},"properties":{"NAME":"Asheville","POSITION":"T","STATE":"NC"},"type":"Feature"},{"geometry":{"coordinates":[-80.8431,35.2271],"type":"Point"},"properties":{"NAME":"Charlotte","POSITION":"T","STATE":"NC"},"type":"Feature"},{"geometry":{"coordinates":[-78.8784,35.0527],"type":"Point"},"properties":{"NAME":"Fayetteville","POSITION":"B","STATE":"NC"},"type":"Feature"},{"geometry":{"coordinates":[-79.792,36.0726],"type":"Point"},"properties":{"NAME":"Greensboro","POSITION":"T","STATE":"NC"},"type":"Feature"},{"geometry":{"coordinates":[-76.2858,36.8507],"type":"Point"},"properties":{"NAME":"Norfolk","POSITION":"R","STATE":"NC"},"type":"Feature"},{"geometry":{"coordinates":[-78.6382,35.7796],"type":"Point"},"properties":{"NAME":"Raleigh","POSITION":"R","STATE":"NC"},"type":"Feature"},{"geometry":{"coordinates":[-100.7837,46.8083],"type":"Point"},"properties":{"NAME":"Bismarck","POSITION":"B","STATE":"ND"},"type":"Feature"},{"geometry":{"coordinates":[-96.7898,46.8772],"type":"Point"},"properties":{"NAME":"Fargo","POSITION":"T","STATE":"ND"},"type":"Feature"},{"geometry":{"coordinates":[-97.0329,47.9253],"type":"Point"},"properties":{"NAME":"Grand Forks","POSITION":"L","STATE":"ND"},"type":"Feature"},{"geometry":{"coordinates":[-101.2923,48.233],"type":"Point"},"properties":{"NAME":"Minot","POSITION":"L","STATE":"ND"},"type":"Feature"},{"geometry":{"coordinates":[-98.342,40.9264],"type":"Point"},"properties":{"NAME":"Grand Island","POSITION":"T","STATE":"NE"},"type":"Feature"},{"geometry":{"coordinates":[-98.9245,40.6941],"type":"Point"},"properties":{"NAME":"Kearney","POSITION":"B","STATE":"NE"},"type":"Feature"},{"geometry":{"coordinates":[-96.7026,40.8136],"type":"Point"},"properties":{"NAME":"Lincoln","POSITION":"B","STATE":"NE"},"type":"Feature"},{"geometry":{"coordinates":[-95.9345,41.2565],"type":"Point"},"properties":{"NAME":"Omaha","POSITION":"L","STATE":"NE"},"type":"Feature"},{"geometry":{"coordinates":[-71.5376,43.2081],"type":"Point"},"properties":{"NAME":"Concord","POSITION":"T","STATE":"NH"},"type":"Feature"},{"geometry":{"coordinates":[-70.8737,43.1979],"type":"Point"},"properties":{"NAME":"Dover","POSITION":"R","STATE":"NH"},"type":"Feature"},{"geometry":{"coordinates":[-71.4548,42.9956],"type":"Point"},"properties":{"NAME":"Manchester","POSITION":"L","STATE":"NH"},"type":"Feature"},{"geometry":{"coordinates":[-71.4676,42.7654],"type":"Point"},"properties":{"NAME":"Nashua","POSITION":"R","STATE":"NH"},"type":"Feature"},{"geometry":{"coordinates":[-75.1196,39.9259],"type":"Point"},"properties":{"NAME":"Camden","POSITION":"R","STATE":"NJ"},"type":"Feature"},{"geometry":{"coordinates":[-74.86,40.51],"type":"Point"},"properties":{"NAME":"Flemington","POSITION":"B","STATE":"NJ"},"type":"Feature"},{"geometry":{"coordinates":[-74.1724,40.7357],"type":"Point"},"properties":{"NAME":"Newark","POSITION":"L","STATE":"NJ"},"type":"Feature"},{"geometry":{"coordinates":[-74.7597,40.2206],"type":"Point"},"properties":{"NAME":"Trenton","POSITION":"R","STATE":"NJ"},"type":"Feature"},{"geometry":{"coordinates":[-106.6504,35.0844],"type":"Point"},"properties":{"NAME":"Albuquerque","POSITION":"B","STATE":"NM"},"type":"Feature"},{"geometry":{"coordinates":[-108.2187,36.7281],"type":"Point"},"properties":{"NAME":"Farmington","POSITION":"R","STATE":"NM"},"type":"Feature"},{"geometry":{"coordinates":[-106.7637,32.3199],"type":"Point"},"properties":{"NAME":"Las Cruces","POSITION":"R","STATE":"NM"},"type":"Feature"},{"geometry":{"coordinates":[-104.523,33.3943],"type":"Point"},"properties":{"NAME":"Roswell","POSITION":"R","STATE":"NM"},"type":"Feature"},{"geometry":{"coordinates":[-105.9378,35.687],"type":"Point"},"properties":{"NAME":"Santa Fe","POSITION":"R","STATE":"NM"},"type":"Feature"},{"geometry":{"coordinates":[-119.7674,39.1638],"type":"Point"},"properties":{"NAME":"Carson City","POSITION":"B","STATE":"NV"},"type":"Feature"},{"geometry":{"coordinates":[-115.1398,36.1699],"type":"Point"},"properties":{"NAME":"Las Vegas","POSITION":"T","STATE":"NV"},"type":"Feature"},{"geometry":{"coordinates":[-119.8149,39.5308],"type":"Point"},"properties":{"NAME":"Reno","POSITION":"T","STATE":"NV"},"type":"Feature"},{"geometry":{"coordinates":[-73.7562,42.6526],"type":"Point"},"properties":{"NAME":"Albany","POSITION":"R","STATE":"NY"},"type":"Feature"},{"geometry":{"coordinates":[-75.92,42.099],"type":"Point"},"properties":{"NAME":"Binghamton","POSITION":"L","STATE":"NY"},"type":"Feature"},{"geometry":{"coordinates":[-78.8784,42.8864],"type":"Point"},"properties":{"NAME":"Buffalo","POSITION":"R","STATE":"NY"},"type":"Feature"},{"geometry":{"coordinates":[-74.006,40.7128],"type":"Point"},"properties":{"NAME":"New York","POSITION":"B","STATE":"NY"},"type":"Feature"},{"geometry":{"coordinates":[-77.6088,43.1566],"type":"Point"},"properties":{"NAME":"Rochester","POSITION":"T","STATE":"NY"},"type":"Feature"},{"geometry":{"coordinates":[-76.1474,43.0481],"type":"Point"},"properties":{"NAME":"Syracuse","POSITION":"T","STATE":"NY"},"type":"Feature"},{"geometry":{"coordinates":[-84.512,39.1031],"type":"Point"},"properties":{"NAME":"Cincinnati","POSITION":"T","STATE":"OH"},"type":"Feature"},{"geometry":{"coordinates":[-81.6944,41.4993],"type":"Point"},"properties":{"NAME":"Cleveland","POSITION":"T","STATE":"OH"},"type":"Feature"},{"geometry":{"coordinates":[-82.9988,39.9612],"type":"Point"},"properties":{"NAME":"Columbus","POSITION":"T","STATE":"OH"},"type":"Feature"},{"geometry":{"coordinates":[-83.5379,41.6528],"type":"Point"},"properties":{"NAME":"Toledo","POSITION":"T","STATE":"OH"},"type":"Feature"},{"geometry":{"coordinates":[-80.649299,41.096258],"type":"Point"},"properties":{"NAME":"Youngstown","POSITION":"L","STATE":"OH"},"type":"Feature"},{"geometry":{"coordinates":[-98.3959,34.6036],"type":"Point"},"properties":{"NAME":"Lawton","POSITION":"R","STATE":"OK"},"type":"Feature"},{"geometry":{"coordinates":[-97.5164,35.4676],"type":"Point"},"properties":{"NAME":"Oklahoma City","POSITION":"L","STATE":"OK"},"type":"Feature"},{"geometry":{"coordinates":[-95.9928,36.154],"type":"Point"},"properties":{"NAME":"Tulsa","POSITION":"T","STATE":"OK"},"type":"Feature"},{"geometry":{"coordinates":[-121.3153,44.0582],"type":"Point"},"properties":{"NAME":"Bend","POSITION":"R","STATE":"OR"},"type":"Feature"},{"geometry":{"coordinates":[-123.0868,44.0521],"type":"Point"},"properties":{"NAME":"Eugene","POSITION":"B","STATE":"OR"},"type":"Feature"},{"geometry":{"coordinates":[-122.8756,42.3265],"type":"Point"},"properties":{"NAME":"Medford","POSITION":"R","STATE":"OR"},"type":"Feature"},{"geometry":{"coordinates":[-122.675,45.5051],"type":"Point"},"properties":{"NAME":"Portland","POSITION":"R","STATE":"OR"},"type":"Feature"},{"geometry":{"coordinates":[-123.0351,44.9429],"type":"Point"},"properties":{"NAME":"Salem","POSITION":"B","STATE":"OR"},"type":"Feature"},{"geometry":{"coordinates":[-75.4714,40.6023],"type":"Point"},"properties":{"NAME":"Allentown","POSITION":"T","STATE":"PA"},"type":"Feature"},{"geometry":{"coordinates":[-80.0851,42.1292],"type":"Point"},"properties":{"NAME":"Erie","POSITION":"R","STATE":"PA"},"type":"Feature"},{"geometry":{"coordinates":[-76.8867,40.2732],"type":"Point"},"properties":{"NAME":"Harrisburg","POSITION":"L","STATE":"PA"},"type":"Feature"},{"geometry":{"coordinates":[-75.1652,39.9526],"type":"Point"},"properties":{"NAME":"Philadelphia","POSITION":"L","STATE":"PA"},"type":"Feature"},{"geometry":{"coordinates":[-79.9959,40.4406],"type":"Point"},"properties":{"NAME":"Pittsburgh","POSITION":"T","STATE":"PA"},"type":"Feature"},{"geometry":{"coordinates":[-75.6624,41.409],"type":"Point"},"properties":{"NAME":"Scranton","POSITION":"B","STATE":"PA"},"type":"Feature"},{"geometry":{"coordinates":[-71.4128,41.824],"type":"Point"},"properties":{"NAME":"Providence","POSITION":"R","STATE":"RI"},"type":"Feature"},{"geometry":{"coordinates":[-79.9311,32.7765],"type":"Point"},"properties":{"NAME":"Charleston","POSITION":"B","STATE":"SC"},"type":"Feature"},{"geometry":{"coordinates":[-81.0348,34.0007],"type":"Point"},"properties":{"NAME":"Columbia","POSITION":"B","STATE":"SC"},"type":"Feature"},{"geometry":{"coordinates":[-82.394,34.8526],"type":"Point"},"properties":{"NAME":"Greenville","POSITION":"B","STATE":"SC"},"type":"Feature"},{"geometry":{"coordinates":[-81.0251,34.9249],"type":"Point"},"properties":{"NAME":"Rock Hill","POSITION":"B","STATE":"SC"},"type":"Feature"},{"geometry":{"coordinates":[-98.4865,45.4647],"type":"Point"},"properties":{"NAME":"Aberdeen","POSITION":"L","STATE":"SD"},"type":"Feature"},{"geometry":{"coordinates":[-100.3538,44.3668],"type":"Point"},"properties":{"NAME":"Pierre","POSITION":"T","STATE":"SD"},"type":"Feature"},{"geometry":{"coordinates":[-103.231,44.0805],"type":"Point"},"properties":{"NAME":"Rapid City","POSITION":"B","STATE":"SD"},"type":"Feature"},{"geometry":{"coordinates":[-96.7283,43.5473],"type":"Point"},"properties":{"NAME":"Sioux Falls","POSITION":"L","STATE":"SD"},"type":"Feature"},{"geometry":{"coordinates":[-97.1151,44.8994],"type":"Point"},"properties":{"NAME":"Watertown","POSITION":"L","STATE":"SD"},"type":"Feature"},{"geometry":{"coordinates":[-85.3097,35.0456],"type":"Point"},"properties":{"NAME":"Chattanooga","POSITION":"T","STATE":"TN"},"type":"Feature"},{"geometry":{"coordinates":[-83.9207,35.9606],"type":"Point"},"properties":{"NAME":"Knoxville","POSITION":"R","STATE":"TN"},"type":"Feature"},{"geometry":{"coordinates":[-90.049,35.1495],"type":"Point"},"properties":{"NAME":"Memphis","POSITION":"R","STATE":"TN"},"type":"Feature"},{"geometry":{"coordinates":[-101.831,35.222],"type":"Point"},"properties":{"NAME":"Amarillo","POSITION":"T","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-97.7431,30.2672],"type":"Point"},"properties":{"NAME":"Austin","POSITION":"T","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-97.5,25.9],"type":"Point"},"properties":{"NAME":"Brownsville","POSITION":"T","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-97.3964,27.8006],"type":"Point"},"properties":{"NAME":"Corpus Christi","POSITION":"R","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-96.797,32.7767],"type":"Point"},"properties":{"NAME":"Dallas","POSITION":"R","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-106.485,31.7619],"type":"Point"},"properties":{"NAME":"El Paso","POSITION":"B","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-95.3698,29.7604],"type":"Point"},"properties":{"NAME":"Houston","POSITION":"R","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-99.5076,27.5036],"type":"Point"},"properties":{"NAME":"Laredo","POSITION":"B","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-101.85525,33.577809],"type":"Point"},"properties":{"NAME":"Lubbock","POSITION":"T","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-102.08,31.99],"type":"Point"},"properties":{"NAME":"Midland","POSITION":"R","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-98.4936,29.4241],"type":"Point"},"properties":{"NAME":"San Antonio","POSITION":"L","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-97.147,31.55],"type":"Point"},"properties":{"NAME":"Waco","POSITION":"R","STATE":"TX"},"type":"Feature"},{"geometry":{"coordinates":[-111.6585,40.2338],"type":"Point"},"properties":{"NAME":"Provo","POSITION":"B","STATE":"UT"},"type":"Feature"},{"geometry":{"coordinates":[-111.891,40.7608],"type":"Point"},"properties":{"NAME":"Salt Lake City","POSITION":"L","STATE":"UT"},"type":"Feature"},{"geometry":{"coordinates":[-82.189,36.595],"type":"Point"},"properties":{"NAME":"Bristol","POSITION":"T","STATE":"VA"},"type":"Feature"},{"geometry":{"coordinates":[-77.436,37.5407],"type":"Point"},"properties":{"NAME":"Richmond","POSITION":"T","STATE":"VA"},"type":"Feature"},{"geometry":{"coordinates":[-79.9414,37.271],"type":"Point"},"properties":{"NAME":"Roanoke","POSITION":"B","STATE":"VA"},"type":"Feature"},{"geometry":{"coordinates":[-75.978,36.8529],"type":"Point"},"properties":{"NAME":"Virginia Beach","POSITION":"B","STATE":"VA"},"type":"Feature"},{"geometry":{"coordinates":[-73.2121,44.4759],"type":"Point"},"properties":{"NAME":"Burlington","POSITION":"T","STATE":"VT"},"type":"Feature"},{"geometry":{"coordinates":[-72.5754,44.2601],"type":"Point"},"properties":{"NAME":"Montpelier","POSITION":"B","STATE":"VT"},"type":"Feature"},{"geometry":{"coordinates":[-72.9726,43.6106],"type":"Point"},"properties":{"NAME":"Rutland","POSITION":"R","STATE":"VT"},"type":"Feature"},{"geometry":{"coordinates":[-122.9007,47.0379],"type":"Point"},"properties":{"NAME":"Olympia","POSITION":"B","STATE":"WA"},"type":"Feature"},{"geometry":{"coordinates":[-122.3321,47.6062],"type":"Point"},"properties":{"NAME":"Seattle","POSITION":"R","STATE":"WA"},"type":"Feature"},{"geometry":{"coordinates":[-117.426,47.6588],"type":"Point"},"properties":{"NAME":"Spokane","POSITION":"L","STATE":"WA"},"type":"Feature"},{"geometry":{"coordinates":[-120.31,47.42],"type":"Point"},"properties":{"NAME":"Wenatchee","POSITION":"R","STATE":"WA"},"type":"Feature"},{"geometry":{"coordinates":[-91.4985,44.8113],"type":"Point"},"properties":{"NAME":"Eau Claire","POSITION":"T","STATE":"WI"},"type":"Feature"},{"geometry":{"coordinates":[-88.0133,44.5133],"type":"Point"},"properties":{"NAME":"Green Bay","POSITION":"L","STATE":"WI"},"type":"Feature"},{"geometry":{"coordinates":[-89.4012,43.0731],"type":"Point"},"properties":{"NAME":"Madison","POSITION":"B","STATE":"WI"},"type":"Feature"},{"geometry":{"coordinates":[-87.9065,43.0389],"type":"Point"},"properties":{"NAME":"Milwaukee","POSITION":"T","STATE":"WI"},"type":"Feature"},{"geometry":{"coordinates":[81.633,38.35],"type":"Point"},"properties":{"NAME":"Charleston","POSITION":"R","STATE":"WV"},"type":"Feature"},{"geometry":{"coordinates":[-94.4611,43.6522],"type":"Point"},"properties":{"NAME":"Fairmont","POSITION":"T","STATE":"WV"},"type":"Feature"},{"geometry":{"coordinates":[-73.4257,40.8682],"type":"Point"},"properties":{"NAME":"Huntington","POSITION":"R","STATE":"WV"},"type":"Feature"},{"geometry":{"coordinates":[-79.9559,39.6295],"type":"Point"},"properties":{"NAME":"Morgantown","POSITION":"R","STATE":"WV"},"type":"Feature"},{"geometry":{"coordinates":[-81.5615,39.2667],"type":"Point"},"properties":{"NAME":"Parkersburg","POSITION":"R","STATE":"WV"},"type":"Feature"},{"geometry":{"coordinates":[-106.3252,42.8501],"type":"Point"},"properties":{"NAME":"Casper","POSITION":"R","STATE":"WY"},"type":"Feature"},{"geometry":{"coordinates":[-104.8202,41.14],"type":"Point"},"properties":{"NAME":"Cheyenne","POSITION":"T","STATE":"WY"},"type":"Feature"},{"geometry":{"coordinates":[-110.7624,43.2799],"type":"Point"},"properties":{"NAME":"Jackson","POSITION":"R","STATE":"WY"},"type":"Feature"},{"geometry":{"coordinates":[-109.2029,41.5875],"type":"Point"},"properties":{"NAME":"Rock Springs","POSITION":"R","STATE":"WY"},"type":"Feature"}]}'),D=3,v={CA:2,NV:2.75,TX:2},s={INTERACTIVE:"interactive",GEO:"geo",LABELS:"labels",POLY_LABELS:"polyLabels"},E=[s.GEO,s.INTERACTIVE,s.LABELS,s.POLY_LABELS],l=[s.GEO,s.INTERACTIVE],P={RIGHT:"R",BOTTOM:"B",LEFT:"L",TOP:"T",CENTER:"C"},b={id:"cities",featureId:({properties:{NAME:x,STATE:n}})=>`${x} ${n}`,type:s.LABELS,source:y,filter(x,n){const Y=v[x.properties.STATE]||D;return n>=Y},label(x){return x.properties.NAME},position(x){return x.properties.POSITION}}},"./components/helpers/analytics.js":(re,L,i)=>{i.r(L),i.d(L,{MAP_TYPE:()=>P,MapAnalyticsContextProvider:()=>x,roundHoverDuration:()=>n,useEmbedAnalytics:()=>ue,useMapAnalytics:()=>Y});var y=i("./node_modules/next/dist/compiled/react/index.js"),D=i("./node_modules/@nbcnews/analytics-framework/dist/analytics-framework.min.js"),v=i.n(D),s=i("./components/providers/EmbedContext.js"),E=y.createElement;const{stub:l}=v();l("register","elections_hover_map",{allowDuplicate:!0});const P={REGULAR:"regular",SIZE_OF_LEAD:"size of lead",REMAINING_VOTE:"remaining vote"},b=(0,y.createContext)(null);function x({children:k,mapType:A=P.REGULAR,raceName:B=""}){const W=(0,y.useMemo)(()=>({mapType:A,raceName:B}),[A,B]);return E(b.Provider,{value:W},k)}x.displayName="MapAnalyticsContextProvider";function n(k){return k<10?5:Math.round(k/10)*10}function Y(){const k=(0,y.useContext)(b),{0:A,1:B}=(0,y.useState)(null),{0:W,1:H}=(0,y.useState)(0),X=(0,y.useRef)(new Set);return(0,y.useEffect)(()=>{if(!k||!W)return;const{raceName:z,mapType:G}=k,K=n(W/1e3);K<5||X.current.has(K)||(X.current.add(K),l("track","elections_hover_map",{duration:K,mapType:G,raceName:z}))},[W,k]),(0,y.useEffect)(()=>{if(!A||!k)return;let z=0;const G=()=>{z=Date.now()},K=()=>{if(!z)return;const se=Date.now()-z;H(le=>le+se)};return A.addEventListener("mouseenter",G),A.addEventListener("mouseleave",K),()=>{A.removeEventListener("mouseenter",G),A.removeEventListener("mouseleave",K)}},[A,k]),{setReference:(0,y.useCallback)(z=>{B(z)},[])}}const M=["nbcnews.com","telemundo.com"];function ue(){const{isPartner:k}=(0,y.useContext)(s.default);(0,y.useEffect)(()=>{const A=B=>{const W=k?"cid":"icid",X=B.target?.closest(`[data-${W}]`)?.getAttribute(`data-${W}`);if(!X)return;const ne=`BI_UI_${W}`,z=M.find(K=>window.location.hostname.includes(K))??M[0],G=new Date;G.setMinutes(G.getMinutes()+30),document.cookie=`${ne}=${X}; expires=${G.toUTCString()}; path=/; domain=${z}`};return window.addEventListener("click",A),()=>{window.removeEventListener("click",A)}},[k])}},"./components/hooks/useIsSafari.js":(re,L,i)=>{i.r(L),i.d(L,{default:()=>v});var y=i("./node_modules/next/dist/compiled/react/index.js"),D=i("./helpers/MobileDetection.js");function v(){const{0:s,1:E}=(0,y.useState)(!1);return(0,y.useEffect)(()=>{E(D.default.iOS()||D.default.Safari())},[]),s}},"./helpers/MobileDetection.js":(re,L,i)=>{i.r(L),i.d(L,{default:()=>D});const y={hasUserAgent(){return typeof navigator<"u"?navigator.userAgent||" ":!1},Android(){return this.hasUserAgent()&&navigator.userAgent.match(/Android/i)},BlackBerry(){return this.hasUserAgent()&&navigator.userAgent.match(/BlackBerry/i)},iOS(){return this.hasUserAgent()&&(navigator.userAgent.match(/iPhone|iPad|iPod/i)||navigator.userAgent.includes("Mac")&&"ontouchend"in document)},Safari(){return this.hasUserAgent()&&navigator.userAgent.match(/^((?!chrome|android).)*safari/i)},Opera(){return this.hasUserAgent()&&navigator.userAgent.match(/Opera Mini/i)},Windows(){return this.hasUserAgent()&&navigator.userAgent.match(/IEMobile/i)},any(){return y.Android()||y.BlackBerry()||y.iOS()||y.Opera()||y.Windows()}},D=y}}]);
