(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[5836],{"./components/modules/PageHeader/2022/PageHeaderV2.stories.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{AllOptions:()=>Ge,__namedExportsOrder:()=>ut,default:()=>it});var v=t("./node_modules/@babel/runtime/helpers/esm/extends.js"),i=t("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),c=t("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),y=t("./node_modules/next/dist/compiled/react/index.js"),f=t("./node_modules/dayjs/plugin/timezone.js"),L=t.n(f),j=t("./components/modules/PageHeader/2022/PageHeaderV2.js"),G=t("./server/v2/helpers/getPollsCloseFormatted.js"),w=t("./components/PageAnchor/PageAnchorContext.js"),D=t("./helpers/constants.js"),K=t("./lib/dayjsCustom.js"),Y=t("./helpers/stateNameUtilities.js"),$=t("./node_modules/lodash.orderby/index.js"),z=t.n($),F=t("./node_modules/lodash.get/index.js"),r=t.n(F),k=t("./node_modules/lodash.isempty/index.js"),q=t.n(k),S=t("./node_modules/dayjs/dayjs.min.js"),P=t.n(S);const U=(e={},n)=>{const{electoral_votes:o}=e;return!o||o===0?{}:{number:o,showPopularVoteLabel:["ME","NE"].includes(n)}};var _=t("./helpers/getHeadshotUrl.js"),N=t("./helpers/determineOfficeType.js"),R=t("./helpers/getCallStatus.js"),H=t("./helpers/getIsWinner.js"),X=t("./helpers/timeUtilities.js"),ne=t("./helpers/getNeatVoteModes.js"),ae=t("./server/v2/format/formatParty.js"),Pe=t("./helpers/getPartyColor.js"),ye=t("./server/v2/helpers/isNonPartisanRace.js"),Re=t("./server/v2/format/formatCandidate.js"),Ie=t("./server/v2/helpers/dates.js"),ge=t("./components/modules/ResultsSummary/utils.js");const fe=["gain","runoffTotal","uncalledTotal"];function le(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),o.push.apply(o,s)}return o}function V(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?le(Object(o),!0).forEach(function(s){(0,c.default)(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):le(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}const{PRESIDENT:ie,SENATE:Ce,SENATE_SPECIAL:Ee,GOVERNOR:Te,HOUSE:de,ATTORNEY_GENERAL:ve,LT_GOVERNOR:De,SECRETARY_OF_STATE:Se,MAYOR:he,STATE_SENATE:ce,SUPREME_COURT:ue}=D.OFFICE_CODES,Ne=[ie,Ce,Ee,Te,de,ve,De,Se,he,ce,ue],We=[ie,Ce,Ee,de,Te,Se,ve,De,he,ce,ue],me=(e="")=>["O","M"].includes(e),Me=(e,n)=>{const o=n>=2022?{dem:"bg-009AF4",rep:"bg-D42F37",gop:"bg-D42F37",lib:"bg-5C5C5C",ind:"bg-5C5C5C",other:"bg-5C5C5C"}:{dem:"bg-0471E6",rep:"bg-DE3535",gop:"bg-DE3535",lib:"bg-595959",ind:"bg-595959",other:"bg-595959"};return o[e]||o.other},Be=(e,n,o=!1)=>({maxValue:100,caret:{percent:e},showLegend:o,values:n}),Fe=(e={},n,o,s,l,d="2020",g=!1)=>{const O=r()(e,"candidate_name",""),E=r()(e,"candidate_code",""),A=r()(e,"vote",""),m=r()(e,"major_party",""),p=r()(e,"percent",0),b=r()(e,"given_name",""),T=r()(e,"family_name",""),ee=r()(e,"call_status",""),J=s&&r()(e,"is_incumbent",!1),C=(0,ae.default)(m),h=(0,ye.default)({officeCode:n,stateAbbr:l}),B=h?(0,Pe.default)({party:h?m:C,electionSeason:d,officeCode:n,order:e.order,stateAbbr:l,electionTypeCode:o,useFullColorPalette:h}).replace("#","bg-"):Me(C,d),Z=`${p}%`,Q=(0,_.default)({party:m,firstName:b,lastName:T,officeCode:n,stateCode:l,electionDate:d,fileFormat:g?"png":"jpg"}),se=(0,H.default)(ee);return{callStatus:ee,code:E,name:O,firstName:b,lastName:T,headshotUrl:Q,isWinner:se,votes:A,party:C,bgColor:B,percentVote:p,formattedPercentVote:Z,isIncumbent:J}};function xe({officeCode:e,stateNameSlug:n,electionSeason:o}){return(e===Ce||e===Ee)&&n==="georgia"&&o==="2020"}const Ae=({officeCode:e,stateName:n,stateNameSlug:o,isRunoff:s=!1,electionSeason:l,electionTypeCode:d})=>{const g=(0,N.default)(e),O=(0,N.normalizeOfficeName)(g);let E;if(s&&xe({officeCode:e,stateNameSlug:o,electionSeason:l})){const p=e===Ee?2:1;E=`${(0,N.default)(e,!1)} Seat ${p} Runoff`}else s?E=`${(0,N.default)(e,!1)} Runoff`:E=n?`${n} ${g} Results`:g;const A="Race Details",m=(0,N.getStateOfficeLink)({officeCode:e,stateNameSlug:o,isRunoff:s,electionSeason:l,electionTypeCode:d});return{officeCode:e,office:O,headlineText:E,linkText:A,href:m}},Le=e=>{const n={value:0,displayString:null};let o=null;return e<=0?o=null:e<500?o="Less than 500":o=e.toLocaleString(),n.value=e,n.displayString=o,n},Ke=e=>{const n=new Map;return ne.default.forEach(o=>{const{neatFlagKey:s,neatValueKey:l,neatPercentKey:d,neatCandidateValueKey:g,modeKey:O,label:E,color:A}=o,m=`${g}_percent_0`,p=r()(e,s,!1),b=r()(e,l,0),T=r()(e,d,0);if(p){const ee=e.candidates.map(C=>{const h=r()(C,m,0),B=r()(C,"major_party",""),Z=(0,ae.default)(B);return{bgColor:Me(Z),lastName:r()(C,"family_name",null),percent:`${h}%`,percentInt:h}}),J=z()(ee,["percentInt"],["desc"]);n.set(O,{color:A,position:"left",votes:b,value:b,percent:`${T}%`,percentInt:T,description:E,candidates:J})}}),n},$e=(e,n,o,s)=>{let l,d,g=!1;const O=[...o].map(([,E])=>V({},E));if(g=!!(o&&o.size&&O.some(E=>E.votes)&&s!=="2022"),g){const A=[],m=[],p=O.filter(T=>T.description!=="Provisional"||T.percentInt>=1);z()(p,["votes","description"],["desc","desc"]).forEach(T=>{(T.description!=="Provisional"||T.percentInt>=1)&&(A.push(T),m.push(T.percentInt))}),l=`${e}%`,d=Be(l,A,!0)}else l=`${e}%`,d=Be(l,[{color:"#EEB900",position:"left",value:n,percent:l}]);return{percentInFormatted:l,percentInChart:d,usesVoteModes:g}},be=(e,n)=>{const o=r()(e,"percent_in",0),s=r()(e,"total_vote",0),l=Ke(e);return $e(o,s,l,n)},Ue=e=>{let n=null;const o=r()(e,"candidates",[]),s=r()(e,"call_status",""),l=(0,R.default)(s)==="Runoff",d=o.filter(g=>(0,R.default)(g.call_status)==="Advance");return l&&d&&d.length&&(d.length>1?n="advance":n="advances"),n},Ye=(e,n,o,s)=>{const O=r()(e,"office_code",""),E=r()(e,"election_type",""),A=r()(e,"candidates",[]),m=r()(e,"state_code",""),p=r()(e,"polls_close",""),b=(0,X.getPollClosedFormatted)(p,e.election_date,s),T=Ae({officeCode:O,stateName:n,stateNameSlug:o}),{number:ee,showPopularVoteLabel:J}=U(e,m),C=A.filter(se=>se.candidate_code===1036||se.candidate_code===8639).map(se=>Fe(se,O,E,!1,m)),h=z()(C,["vote","order"],["desc","asc"]),B=be(e),Z=r()(e,"remaining_vote")||r()(e,"remaining_total_expected_vote",0),Q=Le(Z);return V(V(V({},B),T),{},{callStatusCode:e.call_status,callStatusText:(0,R.default)(e.call_status)||"",totalElectoralVotes:ee,showPopularVoteLabel:J,candidates:h,estimatedVotesRemaining:Q,pollsCloseUTC:p,pollsCloseFormatted:b})},a=(e,n,o,s,l=!1,d=null,g={})=>{const O=r()(e,"race_name",""),E=r()(e,"office_code",""),A=r()(e,"call_status",""),m=e?.allow_multi_winners??!1,p=e?.election_date,b=e?.election_type,T=(0,R.default)(A)||null,ee=(0,Y.getStateAbbreviationByStateName)(o),J=(0,Ie.getYearFromElectionDate)(p),C=r()(e,"polls_close_utc",""),h=(0,X.getPollClosedFormatted)(C,p,s),B=e.election_type===D.ELECTION_TYPE_CODES.GENERAL_RUNOFF,Z=Ae({officeCode:E,stateNameSlug:n,isRunoff:B,electionSeason:J,electionTypeCode:b});let Q=(0,Re.formatCandidates)({race:e,headshots:d,colors:g});l||(Q=Q.slice(0,2));const se=be(e,J),W=r()(e,"remaining_vote")||r()(e,"remaining_total_expected_vote",0),re=r()(e,"gain",!1)&&!(0,ye.default)({stateAbbr:ee,officeCode:E})?(0,ae.default)(r()(e,"party",null)):null,Oe=Ue(e),_e=Le(W);return V(V(V({},se),Z),{},{allowMultiWinners:m,callStatusCode:A,callStatusText:T,candidates:Q,electionTypeCode:e.election_type,raceId:e.race_id,estimatedVotesRemaining:_e,partyGain:re||null,pollsCloseFormatted:h,pollsCloseUTC:C,raceName:O,runoff:Oe,stateName:o})},M=(e,n,o,s,l)=>{const d=r()(e,"race_name",""),g=r()(e,"office_code",""),O=r()(e,"election_type",""),E=r()(e,"candidates",[]),A=r()(e,"call_status",""),m=(0,R.default)(A)||null,p=(0,Y.getStateAbbreviationByStateName)(o),b=r()(e,"polls_close",""),T=(0,X.getPollClosedFormatted)(b,e.election_date,s),ee=e.election_type===D.ELECTION_TYPE_CODES.GENERAL_RUNOFF,J=Ae({officeCode:g,stateNameSlug:n,isRunoff:ee}),C=!0,Z=z()(E,["vote","order"],["desc","asc"]).slice(0,2).map(_e=>Fe(_e,g,O,C,p,l)),Q=be(e,l),se=e.remaining_vote??e.remaining_total_expected_vote??0,te=r()(e,"gain",!1)&&!(0,ye.default)({stateAbbr:p,officeCode:g})?(0,ae.default)(r()(e,"party",null)):null,re=Ue(e),Oe=Le(se);return V(V(V({},Q),J),{},{stateCode:p,callStatusCode:A,callStatusText:m,candidates:Z,electionTypeCode:e.election_type,raceId:e.race_id,estimatedVotesRemaining:Oe,partyGain:te||null,pollsCloseFormatted:T,raceName:d,runoff:re})},oe=(e,n,o,s)=>{const l=r()(e,"office_code",""),d=r()(e,"races",[]),g=Ae({officeCode:l,stateNameSlug:n,electionSeason:s}),O=s>=2022?"polls_close_utc":"polls_close";d.sort((W,te)=>P()(W[O]).isBefore(te[O])?-1:1);const E=r()(d,`[0].${O}`,null),A=r()(d,"[0].election_date",null),m=(0,X.getPollClosedFormatted)(E,A,o),p=d.reduce((W,te)=>{const{gain:re}=W;let{runoffTotal:Oe,uncalledTotal:_e}=W;const je=r()(te,"party",""),Ze=r()(te,"call_status",""),ft=(0,H.default)(Ze),mt=me(Ze);return r()(te,"gain",!1)&&(re[je]=re[je]?re[je]+1:1),ft?W[je]=W[je]?W[je]+1:1:mt?Oe+=1:_e+=1,V(V({},W),{},{gain:re,runoffTotal:Oe,uncalledTotal:_e})},{gain:{},runoffTotal:0,uncalledTotal:0}),{gain:b,runoffTotal:T,uncalledTotal:ee}=p,J=(0,i.default)(p,fe),C=Object.keys(J).map(W=>{const te=p[W],re=(0,ae.default)(W),Oe=Me(re,s),_e=b[W]||0;return{party:re,bgClass:Oe,totalSeats:te,totalGain:_e}}),h=d.length,B=h===1,Z=C.some(W=>W.totalSeats>30),Q=!q()(J),se=C.sort((W,te)=>te.totalSeats-W.totalSeats);return V(V({},g),{},{seats:{runoffTotal:T,uncalledTotal:ee,winners:C,sortedWinners:se,hasOneSeat:B,isLargeSeatAmount:Z,hasCalls:Q,totalOverallSeats:h},pollsCloseFormatted:m})},Ve=e=>e.find(o=>o.office_code===de)?e.reduce((o,s)=>{const[l,...d]=o;return s.office_code!==de?d.push(s):l.races.push(s),[l,...d]},[{office_code:de,races:[]}]):e,pt=({race:e,stateName:n,stateNameSlug:o,currentTime:s=new Date().toISOString()})=>!e||!Ne.includes(e.office_code)?null:a(e,o,n,s);function yt({races:e,offices:n,stateAbbr:o,runoffs:s,currentTime:l,headshots:d,colors:g}){if(!e?.length)return null;const O=n?.length?e.filter(m=>n.includes(m.office_code)):e;if(!O.length)return null;const E=s?.length?O.map(m=>s.find(b=>b.office_code===m.office_code)||m):O;return z()(E,["office_code"],["desc"]).map(m=>a(m,(0,Y.getStateNameSlugByStateAbbreviation)(o),(0,Y.getStateNameByStateAbbreviation)(o),l,!0,d,g))}const Qe=(e,n,o,s=[],l=!1,d=new Date().toISOString(),g,O=!1,E=!1,A=null,m)=>{if(!e||!e.length)return{};const p=E?We:Ne,b=e.filter(h=>p.includes(h.office_code));if(!b.length)return{};const T=b.map(h=>{if(!l)return h;const B=(0,N.getOfficeCodeFromRaceId)(h.race_id);return s.find(Q=>(0,N.getOfficeCodeFromRaceId)(Q.race_id)===B)||h});return{races:Ve(T).sort((h,B)=>p.indexOf(h.office_code)-p.indexOf(B.office_code)).map(h=>{const{office_code:B,election_type:Z}=h;if((0,ge.isPresidentialPrimary)({officeCode:B,electionTypeCode:Z}))return a(h,o,n,d,!0,A,m);switch(B){case ie:return Ye(h,n,o,d);case de:return oe(h,o,d,g);default:return a(h,o,n,d,O,A)}})}},gt=({race:e,stateName:n,stateNameSlug:o,electionSeason:s,currentTime:l=new Date().toISOString()})=>!e||!Ne.includes(e.office_code)?null:M(e,o,n,l,s),Ct=Qe;var ke=t("./node_modules/dayjs/plugin/utc.js"),qe=t.n(ke),et=t("./server/v2/helpers/getFormattedTimestamp.js");P().extend(qe()),P().extend(L());const ze=e=>e?P()(e).isValid():!1,tt=(e,n)=>{const o=P()(e),s=P()(n);return o.isAfter(s)},Et=(...e)=>e.filter(s=>ze(s)).map(s=>P()(s)).reduce((s,l)=>l&&s.isBefore(l)?s:l),ot=(e,n)=>{if(!ze(n))return;const o=!ze(e.lastModified),s=tt(n,e.lastModified);(o||s)&&Object.assign(e,{lastModified:n,lastModifiedFormatted:(0,et.getFormattedTimestampUTC)(n,e.language)})};var st=t("./components/modules/PageHeader/2022/scenarios/mock.json");const nt=["electionSeason","stateAbbr","voteTotal","votesRemaining","percentIn","callStatus","partyGain","electionTypeCode","officeCode"],at=["title","description","hasDivider","showResults","usePageAnchors","electionDate","lastModifiedTime","lastModifiedDate","pollsClose","currentDate","currentTime"];var Je=y.createElement;function we(e,n){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);n&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),o.push.apply(o,s)}return o}function pe(e){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?we(Object(o),!0).forEach(function(s){(0,c.default)(e,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):we(Object(o)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(o,s))})}return e}K.dayJsCustom.extend(L());const He=[{code:19305,name:"Adam Laxalt",firstName:"Adam",lastName:"Laxalt",party:"gop",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_R_A_LAXALT.png"},{code:65148,name:"Catherine Cortez Masto",firstName:"Catherine",lastName:"Cortez Masto",party:"dem",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_D_C_CORTEZMASTO.png"},{code:20074049,name:"Barry Rubinson",firstName:"Barry",lastName:"Rubinson",party:"iap",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I_B_RUBINSON.png"},{code:497,name:"Neil Scott",firstName:"Neil",lastName:"Scott",party:"lib",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I_N_SCOTT.png"},{code:100013,name:"None of these candidates",firstName:"",lastName:"None of these candidates",party:"non",hide:!0,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I__NONEOFTHESECANDIDATES.png"}],rt=He.reduce((e,n,o)=>{const s=`Candidate ${o+1}`,l={category:s};return e[`${s} Hide`]={table:l,control:"boolean"},e[`${s} Vote Share`]={table:l,control:{type:"range",min:0,max:100,step:1}},e[`${s} Is Incumbent`]={table:l,control:"boolean"},e[`${s} Party`]={table:l,control:{type:"text"}},e[`${s} Call Status`]={table:l,control:{type:"select"},options:pe({NONE:""},D.CALL_STATUSES)},e},{}),lt=He.reduce((e,n,o)=>{const s=`Candidate ${o+1}`;return e[`${s} Hide`]=n.hide,e[`${s} Vote Share`]=50,e[`${s} Is Incumbent`]=o===0,e[`${s} Party`]=n.party,e[`${s} Call Status`]=o===0?D.CALL_STATUSES.WINNER:"",e},{}),it={component:j.default,title:"Global Components/Page Header/2022",argTypes:pe({electionDate:{name:"Election Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},lastModifiedTime:{name:"Last Modified Time (ET)",control:{type:"text"},table:{category:"Timestamps"}},lastModifiedDate:{name:"Last Modified Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},pollsClose:{name:"Polls Close (ET)",control:{type:"object"},table:{category:"Timestamps"}},currentDate:{name:"Current Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},currentTime:{name:"Current Time (ET)",control:{type:"text"},table:{category:"Timestamps"}},stateAbbr:{name:"State",options:Y.usStateAbbreviations,table:{category:"Results"},control:{type:"select"}},voteTotal:{control:{type:"number"},table:{category:"Results"}},votesRemaining:{control:{type:"number"},table:{category:"Results"}},percentIn:{control:{type:"number",min:0,max:100,step:1},table:{category:"Results"}},callStatus:{control:{type:"select"},options:pe({NONE:""},D.CALL_STATUSES),table:{category:"Results"}},partyGain:{control:"boolean",table:{category:"Results"}},electionTypeCode:{options:D.ELECTION_TYPE_CODES,control:{type:"select"},table:{category:"Results"}},officeCode:{options:D.OFFICE_CODES,table:{category:"Results"},control:{type:"select"}}},rt),args:pe({title:"Texas Governor election results 2022",description:'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <a href="#">Ut enim</a> ad minim veniam.</p>',hasDivider:!1,showResults:!0,usePageAnchors:!0,electionDate:"2022-11-08",lastModifiedTime:"17:57:00",lastModifiedDate:"2022-11-08",pollsClose:["20:00:00","19:00:00"],currentDate:"2022-11-08",currentTime:"18:00:00",stateAbbr:"TX",voteTotal:1e6,votesRemaining:543210,percentIn:50,callStatus:D.CALL_STATUSES.WINNER,partyGain:!1,electionTypeCode:D.ELECTION_TYPE_CODES.GENERAL_ELECTION,officeCode:D.OFFICE_CODES.GOVERNOR},lt),parameters:{controls:{exclude:["electionType","className","headshots","electionSeason","houseSeats","hidePollsClose","hideTranslateLink","lastModified","lastModifiedFormatted","pollsCloseFormatted","showLiveTag","stateName","stateResultsSummary","titleTag","currentUrlPath","hasTease"]},status:{type:"deprecated"}}},Xe=new Map(Object.entries({breakdown:{id:"breakdown",title:"County breakdown",enabled:!0},polls:{id:"polls",title:"Exit polls",enabled:!0},voted:{id:"voted",title:"How Texas voted",enabled:!0}}));function dt(e,n){let{electionSeason:o,stateAbbr:s,voteTotal:l,votesRemaining:d,percentIn:g,callStatus:O,partyGain:E,electionTypeCode:A,officeCode:m}=n,p=(0,i.default)(n,nt);if(!e)return{};const b=He.map((C,h)=>{const B=`Candidate ${h+1}`,Z=p[`${B} Hide`],Q=p[`${B} Vote Share`],se=p[`${B} Is Incumbent`],W=p[`${B} Party`],te=p[`${B} Call Status`];return pe(pe({},C),{},{callStatus:te,isWinner:D.WINNING_CALL_STATUSES.includes(te),bgColor:Me(W,o),isIncumbent:se,party:W,voteShare:Q,hide:Z})}),T=b.reduce((C,h)=>C+h.voteShare,0);b.forEach(C=>{C.votes=Math.round(C.voteShare/T*l),C.percentVote=parseFloat((C.voteShare/T*100).toFixed(1)),C.formattedPercentVote=`${C.percentVote}%`});const ee=D.PRIMARY_ELECTION_TYPE_CODES.includes(A)?"primary":"general",J=Array.from(b.filter(C=>!C.hide)).sort((C,h)=>h.votes-C.votes);return{officeCode:m,stateAbbr:s,electionType:ee,headshots:st.headshots,stateResultsSummary:[{percentInFormatted:`${g}%`,percentInChart:{maxValue:100,caret:{percent:`${g}%`},showLegend:!1,values:[{color:"#EEB900",position:"left",value:l,percent:`${g}%`}]},electionTypeCode:A,officeCode:m,usesVoteModes:!1,office:D.OFFICE_NAMES[m],headlineText:D.OFFICE_NAMES[m],linkText:"Race Details",callStatusCode:O,callStatusText:(0,R.default)(O),candidates:J,raceId:`2022-11-08~${s}~${m}`,estimatedVotesRemaining:{value:d,displayString:d>0?d.toLocaleString():null},partyGain:E?"someparty":null,raceName:D.OFFICE_NAMES[m],runoff:Ue({call_status:O,candidates:J.map(C=>({call_status:C.callStatus}))})}]}}function ct({pollsClose:e,date:n,time:o,electionDate:s,lastModifiedTime:l,lastModifiedDate:d}){const g=K.dayJsCustom.tz(`${n}T${o}`,"America/New_York").toISOString(),O=n.slice(0,4),E={},A=K.dayJsCustom.tz(`${d}T${l}`,"America/New_York").toISOString();ot(E,A);const m=e.map(b=>({polls_close_utc:K.dayJsCustom.tz(`${s}T${b}`,"America/New_York").toISOString()})),p=(0,G.default)({races:m,electionDate:s,currentTime:g});return pe({currentTime:g,electionSeason:O,pollsCloseFormatted:p},E)}const Ge=e=>{let{title:n,description:o,hasDivider:s,showResults:l,usePageAnchors:d,electionDate:g,lastModifiedTime:O,lastModifiedDate:E,pollsClose:A,currentDate:m,currentTime:p}=e,b=(0,i.default)(e,at);const T=ct({pollsClose:A,electionDate:g,date:m,time:p,lastModifiedTime:O,lastModifiedDate:E});return Je(w.PageAnchorContext.Provider,{value:{addAnchor(){},anchors:Xe}},Je(j.default,(0,v.default)({electionDate:g,title:n,description:o,links:Xe,hasDivider:s,usePageAnchors:d},T,dt(l,pe(pe({},T),b)))))};Ge.displayName="AllOptions",Ge.parameters={knobs:{escapeHTML:!1}};const ut=["AllOptions"]},"./helpers/getIsWinner.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{default:()=>i});const i=(c="")=>["A","P","W"].includes(c)},"./helpers/getNeatVoteModes.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{default:()=>f,getSupportedVoteModes:()=>L});var v=t("./node_modules/lodash.get/index.js"),i=t.n(v);const c=JSON.parse('{"electionDay":"#E89900","electionDayLight":"#FDF7EB","earlyByMail":"#73A60F","earlyByMailLight":"#F4F8EC","earlyInPerson":"#BE57A1","earlyInPersonLight":"#FAF2F7","provisional":"#12BABC"}'),y=[{neatFlagKey:"eday_vote_flg",neatValueKey:"total_eday_vote",neatPercentKey:"eday_vote_percent_0",neatCandidateValueKey:"eday_vote",modeKey:"electionDay",label:"Election Day",color:i()(c,"electionDay"),lightColor:i()(c,"electionDayLight")},{neatFlagKey:"early_by_mail_flg",neatValueKey:"total_early_by_mail_vote",neatPercentKey:"early_by_mail_vote_percent_0",neatCandidateValueKey:"early_by_mail_vote",modeKey:"earlyByMail",label:"Early by Mail",color:i()(c,"earlyByMail",""),lightColor:i()(c,"earlyByMailLight","")},{neatFlagKey:"early_in_person_flg",neatValueKey:"total_early_in_person_vote",neatPercentKey:"early_in_person_vote_percent_0",neatCandidateValueKey:"early_in_person_vote",modeKey:"earlyInPerson",label:"Early In Person",color:i()(c,"earlyInPerson",""),lightColor:i()(c,"earlyInPersonLight","")},{neatFlagKey:"provisional_flg",neatValueKey:"total_provisional_vote",neatPercentKey:"provisional_vote_percent_0",neatCandidateValueKey:"provisional_vote",modeKey:"provisional",label:"Provisional",color:i()(c,"provisional",""),lightColor:i()(c,"provisionalLight","")}],f=y,L=({race:j,disabled:G=[]})=>y.filter(w=>{const{neatFlagKey:D,modeKey:K}=w;return i()(j,D,!1)&&!G.includes(K)?w:!1})},"./helpers/timeUtilities.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{formatDuration:()=>S,getDate:()=>r,getDateNow:()=>k,getPollClosedFormatted:()=>U,isAfter:()=>I,isBefore:()=>P});var v=t("./node_modules/left-pad/index.js"),i=t.n(v),c=t("./node_modules/parse-iso-duration/index.js"),y=t.n(c),f=t("./node_modules/dayjs/plugin/utc.js"),L=t.n(f),j=t("./node_modules/dayjs/plugin/timezone.js"),G=t.n(j),w=t("./node_modules/dayjs/plugin/isSameOrAfter.js"),D=t.n(w),K=t("./lib/dayjsCustom.js"),Y=t("./server/v2/helpers/getPollsCloseFormatted.js");K.dayJsCustom.extend(L()),K.dayJsCustom.extend(G()),K.dayJsCustom.extend(D());const $=_=>Math.floor(_/1e3%60),z=_=>Math.floor(_/(1e3*60)%60),F=_=>Math.floor(_/(1e3*60*60)%24),r=_=>(0,K.dayJsCustom)(_),k=()=>K.dayJsCustom.utc().tz("America/New_York"),q=_=>i()(String(_),2,"0"),S=_=>{let N;try{N=y()(_)}catch{return null}if(!N)return null;const R=F(N),H=z(N),X=$(N);if(!R){const ne=q(H),ae=q(X);return`${ne}:${ae}`}return`${q(R)}:${q(H)}:${q(X)}`},P=(_,N="day")=>{const R=k(),H=r(_);return(0,K.dayJsCustom)(R).isBefore(H,N)},I=(_,N="day")=>{const R=k(),H=r(_);return(0,K.dayJsCustom)(R).isAfter(H,N)},U=(_,N,R)=>(0,Y.default)({races:[{polls_close_utc:_}],electionDate:N,currentTime:R})},"./server/v2/format/formatCandidate.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{formatCandidate:()=>F,formatCandidates:()=>k,formatCountyCandidates:()=>q,getNeatColor:()=>z});var v=t("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=t("./node_modules/lodash-es/orderBy.js"),c=t("./server/v2/format/formatParty.js"),y=t("./server/v2/helpers/isNonPartisanRace.js"),f=t("./helpers/getPartyColor.js"),L=t("./helpers/getHeadshotUrl.js"),j=t("./helpers/getIsWinner.js"),G=t("./helpers/constants.js"),w=t("./server/v2/helpers/dates.js"),D=t("./helpers/isHeadshotUrlValid.js");function K(S,P){var I=Object.keys(S);if(Object.getOwnPropertySymbols){var U=Object.getOwnPropertySymbols(S);P&&(U=U.filter(function(_){return Object.getOwnPropertyDescriptor(S,_).enumerable})),I.push.apply(I,U)}return I}function Y(S){for(var P=1;P<arguments.length;P++){var I=arguments[P]!=null?arguments[P]:{};P%2?K(Object(I),!0).forEach(function(U){(0,v.default)(S,U,I[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(I)):K(Object(I)).forEach(function(U){Object.defineProperty(S,U,Object.getOwnPropertyDescriptor(I,U))})}return S}const $=`${L.headshotBaseUrl}/candidate_fallback_light.png`,z=(S,P)=>{if(!P||!S)return null;const I=P[S]?.color_hex;return I?`#${I}`:null};function F({candidate:S,race:P,headshots:I,colors:U={}}){const{candidate_name:_="",candidate_code:N=0,vote:R="",major_party:H="",percent:X=0,given_name:ne="",family_name:ae="",call_status:Pe="",is_incumbent:ye=!1,color_code:Re}=S,{election_date:Ie,election_type:ge,state_code:fe,office_code:le}=P,V=(0,w.getYearFromElectionDate)(Ie),ie=(0,c.default)(H),Ce=(0,y.default)({officeCode:le,stateAbbr:fe}),Ee=Ce||G.PRIMARY_ELECTION_TYPE_CODES.includes(ge),Te=z(Re,U),de=(0,f.default)({party:Ce?H:ie,electionSeason:V,officeCode:le,order:S.order,stateAbbr:fe,electionTypeCode:ge,useFullColorPalette:Ee}),ve=Te||de,De=ve.replace("#","bg-"),Se=`${X}%`;let he=(0,L.default)({party:H,firstName:ne,lastName:ae,officeCode:le,stateCode:fe,electionDate:V,fileFormat:"png"});I&&!(0,D.default)(I[V],he)&&(he=$);const ce=(0,j.default)(Pe);return{callStatus:Pe,code:N,name:_,firstName:ne,lastName:ae,headshotUrl:he,isWinner:ce,votes:R,party:ie,bgColor:De,colorHex:ve,percentVote:X,formattedPercentVote:Se,isIncumbent:ye}}const r=S=>(0,i.default)(S,["vote","order"],["desc","asc"]);function k({race:S,headshots:P,colors:I}){return r(S.candidates).map(_=>F({headshots:P,candidate:_,race:S,colors:I}))}function q({county:S,race:P,headshots:I,colors:U}){const _=S.candidates.map(R=>{const H=P.candidates.find(X=>X.candidate_code===R.code);return Y(Y({},H),{},{vote:R.vote,percent:R.vote_percent_1,percent_0:R.vote_percent_0})});return r(_).map(R=>F({headshots:I,race:P,candidate:R,colors:U}))}},"./server/v2/format/formatParty.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{default:()=>i});var v=t("./server/v2/normalize/normalizePartyAbbreviation.js");function i(c){const y=(0,v.default)(c).toLowerCase();return y==="rep"?"gop":y}},"./server/v2/helpers/dates.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{getYearFromElectionDate:()=>v});function v(i){return i.slice(0,4)}},"./server/v2/helpers/getFormattedTimestamp.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{default:()=>Y,getFormattedTimestampUTC:()=>D});var v=t("./node_modules/dayjs/plugin/utc.js"),i=t.n(v),c=t("./node_modules/dayjs/plugin/timezone.js"),y=t.n(c),f=t("./node_modules/dayjs/locale/es.js"),L=t.n(f),j=t("./lib/dayjsCustom.js");j.dayJsCustom.extend(i()),j.dayJsCustom.extend(y());const G={SAME_DAY:"h:mm A ET",BEFORE_TODAY:"MMM D, h:mm A ET",PREVIOUS_YEAR:"MMM D, YYYY"},w=($,z="en")=>{let F="h:mm A ET";const r=(0,j.dayJsCustom)().tz("America/New_York"),k=r.format("YYYY-MM-DD").toString(),q=r.format("YYYY").toString(),S=$.format("YYYY"),P=$.format("YYYY-MM-DD"),I=(0,j.dayJsCustom)(q).diff(S,"year"),U=(0,j.dayJsCustom)(k).diff(P,"day");return U===0&&(F=G.SAME_DAY),U>0&&(F=G.BEFORE_TODAY),I>0&&(F=G.PREVIOUS_YEAR),$.locale(z).format(F)},D=($,z="en")=>{if(!$||typeof $!="string")return"";const F=j.dayJsCustom.utc($).tz("America/New_York");return w(F,z)},Y=$=>!$||typeof $!="string"?"":w((0,j.dayJsCustom)($))},"./server/v2/helpers/getPollsCloseFormatted.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{default:()=>G});var v=t("./node_modules/dayjs/plugin/utc.js"),i=t.n(v),c=t("./node_modules/dayjs/plugin/timezone.js"),y=t.n(c),f=t("./node_modules/dayjs/plugin/isSameOrAfter.js"),L=t.n(f),j=t("./lib/dayjsCustom.js");j.dayJsCustom.extend(i()),j.dayJsCustom.extend(y()),j.dayJsCustom.extend(L());function G({races:w,electionDate:D,currentTime:K}){const Y=Array.from(new Set(w.map(q=>q.polls_close_utc).filter(Boolean))).sort();if(!Y.length)return null;const $=Y[0],z=j.dayJsCustom.utc(K).tz("America/New_York"),F=j.dayJsCustom.utc(D).hour(12).tz("America/New_York"),r=j.dayJsCustom.utc($).tz("America/New_York");if(z.isSameOrAfter(r))return null;if(z.isBefore(F,"day"))return`Election on ${F.format("MMM D")}`;const k=`${r.format("h:mm A")} ET`;return Y.length>1?`Polls begin to close today at ${k}`:`Polls close at ${k}`}},"./server/v2/helpers/isNonPartisanRace.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{default:()=>f});var v=t("./node_modules/lodash.get/index.js"),i=t.n(v),c=t("./helpers/constants.js");const y={[c.OFFICE_CODES.MAYOR]:["LC","CH"],[c.OFFICE_CODES.SUPREME_COURT]:["WI"]};function f({officeCode:L,stateAbbr:j}){return i()(y,[L],[]).includes(j)}},"./server/v2/normalize/normalizePartyAbbreviation.js":(x,u,t)=>{"use strict";t.r(u),t.d(u,{default:()=>c});const i=y=>{if(typeof y!="string")return!1;const f=y.toLowerCase();return!["dem","rep","ind","lib"].includes(f)};function c(y){if(typeof y!="string")return"other";const f=y.toLowerCase()==="gop"?"Rep":y;return i(f)?"other":f}},"./node_modules/left-pad/index.js":x=>{"use strict";x.exports=t;var u=[""," ","  ","   ","    ","     ","      ","       ","        ","         "];function t(v,i,c){if(v=v+"",i=i-v.length,i<=0)return v;if(!c&&c!==0&&(c=" "),c=c+"",c===" "&&i<10)return u[i]+v;for(var y="";i&1&&(y+=c),i>>=1,i;)c+=c;return y+v}},"./node_modules/lodash.isempty/index.js":(x,u,t)=>{x=t.nmd(x);var v=9007199254740991,i="[object Arguments]",c="[object Function]",y="[object GeneratorFunction]",f="[object Map]",L="[object Object]",j="[object Promise]",G="[object Set]",w="[object WeakMap]",D="[object DataView]",K=/[\\^$.*+?()[\]{}|]/g,Y=/^\[object .+?Constructor\]$/,$=typeof t.g=="object"&&t.g&&t.g.Object===Object&&t.g,z=typeof self=="object"&&self&&self.Object===Object&&self,F=$||z||Function("return this")(),r=u&&!u.nodeType&&u,k=r&&!0&&x&&!x.nodeType&&x,q=k&&k.exports===r;function S(a,M){return a?.[M]}function P(a){var M=!1;if(a!=null&&typeof a.toString!="function")try{M=!!(a+"")}catch{}return M}function I(a,M){return function(oe){return a(M(oe))}}var U=Function.prototype,_=Object.prototype,N=F["__core-js_shared__"],R=function(){var a=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),H=U.toString,X=_.hasOwnProperty,ne=_.toString,ae=RegExp("^"+H.call(X).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pe=q?F.Buffer:void 0,ye=_.propertyIsEnumerable,Re=Pe?Pe.isBuffer:void 0,Ie=I(Object.keys,Object),ge=ce(F,"DataView"),fe=ce(F,"Map"),le=ce(F,"Promise"),V=ce(F,"Set"),ie=ce(F,"WeakMap"),Ce=!ye.call({valueOf:1},"valueOf"),Ee=me(ge),Te=me(fe),de=me(le),ve=me(V),De=me(ie);function Se(a){return ne.call(a)}function he(a){if(!be(a)||Ne(a))return!1;var M=Ke(a)||P(a)?ae:Y;return M.test(me(a))}function ce(a,M){var oe=S(a,M);return he(oe)?oe:void 0}var ue=Se;(ge&&ue(new ge(new ArrayBuffer(1)))!=D||fe&&ue(new fe)!=f||le&&ue(le.resolve())!=j||V&&ue(new V)!=G||ie&&ue(new ie)!=w)&&(ue=function(a){var M=ne.call(a),oe=M==L?a.constructor:void 0,Ve=oe?me(oe):void 0;if(Ve)switch(Ve){case Ee:return D;case Te:return f;case de:return j;case ve:return G;case De:return w}return M});function Ne(a){return!!R&&R in a}function We(a){var M=a&&a.constructor,oe=typeof M=="function"&&M.prototype||_;return a===oe}function me(a){if(a!=null){try{return H.call(a)}catch{}try{return a+""}catch{}}return""}function Me(a){return xe(a)&&X.call(a,"callee")&&(!ye.call(a,"callee")||ne.call(a)==i)}var Be=Array.isArray;function Fe(a){return a!=null&&$e(a.length)&&!Ke(a)}function xe(a){return Ue(a)&&Fe(a)}var Ae=Re||Ye;function Le(a){if(Fe(a)&&(Be(a)||typeof a=="string"||typeof a.splice=="function"||Ae(a)||Me(a)))return!a.length;var M=ue(a);if(M==f||M==G)return!a.size;if(Ce||We(a))return!Ie(a).length;for(var oe in a)if(X.call(a,oe))return!1;return!0}function Ke(a){var M=be(a)?ne.call(a):"";return M==c||M==y}function $e(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=v}function be(a){var M=typeof a;return!!a&&(M=="object"||M=="function")}function Ue(a){return!!a&&typeof a=="object"}function Ye(){return!1}x.exports=Le},"./node_modules/parse-iso-duration/index.js":x=>{var u=/^P([0-9]+W)$/,t=/^P(([0-9]+Y)?([0-9]+M)?([0-9]+D)?)?(T([0-9]+H)?([0-9]+M)?([0-9]+S)?)?$/;function v(y){return parseInt(y.substring(0,y.length-1),10)}function i(y,f){if(!f)return 0;var L=v(f),j=y+" "+f[f.length-1];if(L===0)return 0;switch(j){case"time S":return L*1e3;case"time M":return L*6e4;case"time H":return L*36e5;case"date D":return L*864e5;case"week W":return L*6048e5;case"date M":case"date Y":throw new Error("Ambiguous duration")}}function c(y){var f;if(f=u.exec(y),f)return i("week",f[1]);if(f=t.exec(y),f)return i("date",f[2])+i("date",f[3])+i("date",f[4])+i("time",f[6])+i("time",f[7])+i("time",f[8]);throw new Error("Invalid duration")}x.exports=c}}]);
