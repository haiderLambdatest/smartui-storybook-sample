"use strict";(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[8985],{"./components/AmpLiveListWrapper.js":(W,T,o)=>{o.r(T),o.d(T,{default:()=>j});var c=o("./node_modules/next/dist/compiled/react/index.js"),U=o("./node_modules/prop-types/index.js"),h=o.n(U),R=o("./node_modules/next/amp.js"),Y=o.n(R),v=c.createElement;const z=({children:F,id:x,dataMaxItemsPerPage:g})=>(0,R.useAmp)()?v("amp-live-list",{class:"amp-live-list-wrapper","data-poll-interval":"15000","data-max-items-per-page":g,id:x},v("div",{className:"dn",update:"true"},"new updates"),F):F;z.propTypes={children:h().node},z.defaultProps={children:null};const j=z},"./components/providers/StatewideElectionProvider.js":(W,T,o)=>{o.r(T),o.d(T,{StatewideElectionConsumer:()=>ge,StatewideElectionContext:()=>$,StatewideElectionProvider:()=>te});var c=o("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),U=o("./node_modules/d3-collection/src/index.js"),h=o("./node_modules/lodash.orderby/index.js"),R=o.n(h),Y=o("./node_modules/lodash.uniq/index.js"),v=o.n(Y),z=o("./node_modules/next/dist/compiled/react/index.js"),j=o("./helpers/getElectionTypes.js"),F=o("./helpers/getHeadshotUrl.js"),x=o("./helpers/getPartyColor.js");const G=({candidates:t,electionDate:s,electionType:e,electionTypeCode:n,delegates:a,officeCode:m})=>{const l={},f=t.map(S=>{const{call_status:A,candidate_code:N,candidate_name:d,column:p,family_name:y,given_name:D,is_editorial:P,is_incumbent:L,major_party:C,order:r,percent:b,vote:E}=S;let u,i=r;if(e==="primary"&&m==="P"&&a){u=a.find(B=>B.candidate_code===N);const{order:_=null}=u||{};i=_||null}m==="H"&&(l[C]?l[C]+=1:l[C]=1,i=l[C]);const w=(0,x.default)({party:C,order:i,officeCode:m,electionTypeCode:n}),O=(0,F.default)({party:C,firstName:D,lastName:y,officeCode:m,electionDate:s});return{id:N,candidate:d,color:w,column:p,delegates:u,headshotUrl:O,isEditorial:P,isIncumbent:L,isWinner:["A","P","W"].includes(A),firstName:D,lastName:y,order:i,party:C,percent:b,votes:E}});return R()(f,["votes","isIncumbent","isEditorial","lastName"],["desc","desc","desc","asc"])};var X=o("./node_modules/lodash.kebabcase/index.js"),K=o.n(X),H=o("./helpers/typeChecker.js");const ie=({candidate:t,county:s})=>{if(s&&s.candidates&&t){const{vote:e,vote_percent_1:n}=s.candidates.find(a=>a.code===t.id)||{};return{percent:(0,H.isNumber)(n)?n:"",votes:(0,H.isNumber)(e)?e:""}}if(t&&t.column&&s){const e=`${t.column.toLowerCase()}_vote_percent_1`,n=`${t.column.toLowerCase()}_vote`;return{percent:(0,H.isNumber)(s[e])?s[e]:"",votes:(0,H.isNumber)(s[n])?s[n]:""}}return{percent:"",votes:""}};var re=o("./helpers/isTownship.js");const ae=t=>t.includes("Legislative District")?!0:null,ce=t=>t.includes("Congressional District")?!0:null,le=t=>t&&t.includes("Ward")?!0:null;function Q(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function V(t){for(var s=1;s<arguments.length;s++){var e=arguments[s]!=null?arguments[s]:{};s%2?Q(Object(e),!0).forEach(function(n){(0,c.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Q(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}const de=({counties:t,raceResults:s})=>{const e=t.find(m=>m.county_name==="Chicago"),n=t.find(m=>m.county_name==="Cook Suburbs");let a;if(e&&n){a=t.filter(d=>d.county_name!=="Chicago"),a=a.filter(d=>d.county_name!=="Cook Suburbs");const{candidates:m,total_vote:l}=e,{candidates:f,total_vote:I}=n,S=l+I,A=m.map((d,p)=>{let y;return S===0?y=0:y=((f[p].vote+d.vote)/S*100).toFixed(2),V(V({},d),{},{vote_percent_1:Number(y)})}),N=V(V({},e),{},{county_name:"Cook",candidates:A,fips_code:"17031"});a.push(N),a=a.sort((d,p)=>d.fips_code-p.fips_code)}return(a||t).map(m=>{const{county_name:l="",county_code:f,fips_code:I,n_precinct:S,n_precinct_report:A,n_precinct_report_percent_1:N,registered:d,total_vote:p,updated_at:y,updated:D}=m,P=I.slice(0,2),L=(0,re.default)({fips:P}),C=P==="44",r=ae(l),b=ce(l),E=le(l);let u=I;(L||b)&&(u=K()(l)),r&&(u=K()(f)),E&&(u=K()(f)),C&&(u=K()(l));const i=s.map(O=>{const _=ie({candidate:O,county:m});return V(V({},O),_)}),w=R()(i.filter(O=>O.isEditorial),["votes","isIncumbent","lastName"],["desc","desc","asc"]);return{county_name:l,featureId:u,fips_code:I,n_precinct:S,n_precinct_report:A,n_precinct_report_percent_1:N,registered:d,results:w,total_vote:p,updated_at:y,updated:D}})};function Z(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function q(t){for(var s=1;s<arguments.length;s++){var e=arguments[s]!=null?arguments[s]:{};s%2?Z(Object(e),!0).forEach(function(n){(0,c.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Z(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}const pe={P:"Presidential exit polls",PV:"Presidential entrance polls"},ue={P:"Exit Polls",PV:"Entrance Polls"},me={Dem:"Democratic",Rep:"Republican"},fe=["H711","H2602","H16"],Ee=(t,[s=""])=>t.map(e=>e==="P"&&s==="2020-03-17"?"Presidential primary polls":pe[e]),Te=({exit_polls:t,allCandidates:s})=>{if(!t||!t.length)return[];const e=v()(t.map(f=>f.office_code)),n=v()(t.map(f=>f.election_date)),a=Ee(e,n),m=t.map(f=>{const{election_type:I,columns:S,row_entry:A,office_code:N}=f,d=S?S.slice(5):[],p=(0,j.getPartyByElectionType)(I),y=d.map(r=>{const{order:b}=s.find(u=>u.id===r.candidate_code);return`bg-${(0,x.default)({party:p,order:b,electionTypeCode:I,officeCode:N}).replace("#","")}`}),D=Object.keys(A).reduce((r,b)=>{const E=A[b],[u]=E;return r[u]||(r[u]=[]),r[u].push(E),r},{}),P=Object.keys(D).filter(r=>!fe.includes(r)).map(r=>D[r]),L=me[p],C=ue[N];return q(q({},f),{},{allCandidates:s,buttonText:L,colors:y,displayColumns:d,party:p,questionBlocks:P,type:C})}),l=R()(m,["party"],["asc"]);return{titles:a,sorted:l}};var M=o("./helpers/constants.js"),Ce=z.createElement;function ee(t,s){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);s&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable})),e.push.apply(e,n)}return e}function k(t){for(var s=1;s<arguments.length;s++){var e=arguments[s]!=null?arguments[s]:{};s%2?ee(Object(e),!0).forEach(function(n){(0,c.default)(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ee(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}const be=(t,s,e)=>{if(!s.length)return[];const n=s[0].state_code,a={KY:"2019-11-05",CA:["2020-03-03","2020-05-12"],NY:"2020-06-23",NC:"2019-09-10",IA:"2020-02-03"};if(!t||(()=>a[n]?Array.isArray(a[n])?a[n].includes(e):a[n]&&a[n]===e:!1)()||M.RACES_TO_GET_BY_DATE_EXCEPTIONS[e])return s;const l={special:M.SPECIAL_ELECTION_TYPE_CODES,primary:M.PRIMARY_ELECTION_TYPE_CODES};return l[t]&&s.filter(f=>l[t].includes(f.election_type))||s},$=z.createContext({});class te extends z.Component{constructor(s){super(s);const{value:{NEATdata:e,electionType:n,topojson:a,usState:m}}=s,{races:l=[],exit_polls:f=[],DayID:I=null}=e,S=[M.OFFICE_CODES.ISSUE_1,M.OFFICE_CODES.ISSUE_2,M.OFFICE_CODES.ISSUE_3],A=l.filter(i=>!S.includes(i.office_code)),N=M.OFFICE_CODES.PRESIDENT,d=M.ELECTION_TYPE_CODES.DEMOCRATIC_CAUCUS,p=M.ELECTION_TYPE_CODES.DEMOCRATIC_PRIMARY,y=M.OFFICE_CODES.PRES_PRE_VIABILITY,D=M.OFFICE_CODES.PRESIDENT_SPECIAL,P=l.find(i=>i.election_type===p||i.election_type===d),L=!!P;if(P){const{delegate_data:i}=P;l.filter(O=>O.office_code===y||O.office_code===D).forEach(O=>{O.delegate_data=i})}const C=(0,j.getIsCaucusFromRaces)(A),r=A.map(i=>{let w=[];const{counties:O,candidates:_,delegate_data:B,election_date:J,office_code:ne,election_type:ye,race_id:Pe}=i,se=B;ne===N&&se&&(w=B.state_level_candidates),L&&se&&(w=B.state_level_candidates);const oe=G({candidates:_,delegates:w,electionDate:J,electionType:n,electionTypeCode:ye,officeCode:ne}),Oe=de({counties:O,raceResults:oe});return k(k(k({},i),{raceId:`nbc-${Pe.replace(/~/g,"--")}`}),{},{results:oe,counties:Oe})}),b=r.filter(i=>!["PV","P2"].includes(i.office_code)),E=Array.prototype.concat.apply([],[...b.map(i=>i.results)]),u=Te({exit_polls:f,allCandidates:E});this.state={exitPolls:u,electionType:n,races:r,topojson:a,usState:m,isCaucus:C,dayId:I}}render(){const{children:s}=this.props,{races:e,exitPolls:n,isCaucus:a,electionType:m,dayId:l}=this.state,f=d=>e.find(p=>p.raceId===d),I=()=>{const d=be(m,e,l),p=U.nest().key(r=>r.office_code[0]).entries(d).map(({key:r,values:b})=>{let E;if(r==="P"){const u=b.find(_=>{const B=_.office_code==="P",J=_.election_type==="E"||_.election_type==="D";return B&&J}),i=b.find(_=>_.election_type==="S"||_.election_type==="R"),w=b.find(_=>_.office_code==="PV"),O=b.find(_=>_.office_code==="P2");E=[],u&&E.push(u),w&&E.push(w),O&&E.push(O),i&&E.push(i)}else E=R()(b,["jcode","election_type","race_name"],["asc","asc","desc"]);return{key:r,values:E}}),y=p.find(({key:r})=>r==="P"),D=p.find(({key:r})=>r==="S"),P=p.find(({key:r})=>r==="H"),L=p.find(({key:r})=>r==="G"),C=p.find(({key:r})=>r==="I");return[y,D,P,L,C].filter(r=>r)},S=()=>!n||!n.sorted||!n.sorted.length?null:n.sorted,A=()=>!n||!n.titles||!n.titles.length?null:n.titles,N=()=>{if(!e&&e.length)return null;const d=e.filter(i=>i.office_code==="P"),p=e.filter(i=>i.office_code==="S"),y=e.filter(i=>i.office_code==="H"),D=e.filter(i=>i.office_code==="G"),P=[...d,...p,...y,...D].filter(i=>i),L=P[0]||{},C=v()(P.map(i=>i.results[0].party)),r=v()(P.map(i=>i.office_code)),{election_type:b,office_code:E,election_date:u}=L;return{electionTypeCode:b,officeCode:E,parties:C,electionDate:u,uniqueOfficeCodes:r}};return Ce($.Provider,{value:{state:this.state,getRaceById:f,getRacesGroupedByOffice:I,getStatewideMetaData:N,getExitPolls:S,getExitPollTitles:A,isCaucus:a}},s)}}te.displayName="StatewideElectionProvider";const ge=$.Consumer},"./data/usStates.js":(W,T,o)=>{o.r(T),o.d(T,{default:()=>c});const c=[{abbr:"DA",name:"Democrats Abroad",fips:"0000"},{abbr:"AK",name:"Alaska",fips:"02",region:"arctic",timezones:["AT"],isLegislativeDistrict:!0,reportingType:"Legislative District"},{abbr:"AL",name:"Alabama",fips:"01",region:"south",timezones:["CT"]},{abbr:"AZ",name:"Arizona",fips:"04",region:"southwest",timezones:["MT"]},{abbr:"AR",name:"Arkansas",fips:"05",region:"south",timezones:["CT"]},{abbr:"CA",name:"California",fips:"06",region:"west",timezones:["PT"]},{abbr:"CO",name:"Colorado",fips:"08",region:"rockies",timezones:["MT"]},{abbr:"CT",name:"Connecticut",fips:"09",region:"new england",timezones:["ET"],isTownship:"true",reportingType:"Township"},{abbr:"DE",name:"Delaware",fips:"10",region:"northeast",timezones:["ET"]},{abbr:"DC",name:"District of Columbia",fips:"11",region:"midatlantic",timezones:["ET"],isWard:"true",reportingType:"Ward"},{abbr:"FL",name:"Florida",fips:"12",region:"southeast",timezones:["ET"]},{abbr:"GA",name:"Georgia",fips:"13",region:"south",timezones:["ET"]},{abbr:"HI",name:"Hawaii",fips:"15",region:"pacific",timezones:["HT"]},{abbr:"ID",name:"Idaho",fips:"16",region:"rockies",timezones:["MT","PT"]},{abbr:"IL",name:"Illinois",fips:"17",region:"midwest",timezones:["CT"]},{abbr:"IN",name:"Indiana",fips:"18",region:"arctic",timezones:["ET","CT"]},{abbr:"IA",name:"Iowa",fips:"19",region:"midwest",timezones:["CT"]},{abbr:"KS",name:"Kansas",fips:"20",region:"",timezones:["CT","MT"]},{abbr:"KY",name:"Kentucky",fips:"21",region:"",timezones:["ET","CT"]},{abbr:"LA",name:"Louisiana",fips:"22",region:"south",timezones:["CT"],reportingType:"Parish"},{abbr:"ME",name:"Maine",fips:"23",region:"northeast",timezones:["ET"],isTownship:"true",reportingType:"Township"},{abbr:"MD",name:"Maryland",fips:"24",region:"",timezones:["ET"]},{abbr:"MA",name:"Massachusetts",fips:"25",region:"new england",timezones:["ET"],isTownship:"true",reportingType:"Township"},{abbr:"MI",name:"Michigan",fips:"26",region:"midwest",timezones:["ET","CT"]},{abbr:"MN",name:"Minnesota",fips:"27",region:"midwest",timezones:["CT"]},{abbr:"MS",name:"Mississippi",fips:"28",region:"south",timezones:["ET"]},{abbr:"MO",name:"Missouri",fips:"29",region:"midwest",timezones:["CT"]},{abbr:"MT",name:"Montana",fips:"30",region:"",timezones:["MT"]},{abbr:"NE",name:"Nebraska",fips:"31",region:"",timezones:["CT","MT"]},{abbr:"NV",name:"Nevada",fips:"32",region:"west",timezones:["PT"]},{abbr:"NH",name:"New Hampshire",fips:"33",region:"new england",timezones:["ET"],isTownship:"true",reportingType:"Township"},{abbr:"NJ",name:"New Jersey",fips:"34",region:"northeast",timezones:["ET"]},{abbr:"NM",name:"New Mexico",fips:"35",region:"southwest",timezones:["MT"]},{abbr:"NY",name:"New York",fips:"36",region:"north east",timezones:["ET"]},{abbr:"NC",name:"North Carolina",fips:"37",region:"south east",timezones:["ET"]},{abbr:"ND",name:"North Dakota",fips:"38",region:"",timezones:["CT","MT"]},{abbr:"OH",name:"Ohio",fips:"39",region:"",timezones:["ET"]},{abbr:"OK",name:"Oklahoma",fips:"40",region:"",timezones:["CT"]},{abbr:"OR",name:"Oregon",fips:"41",region:"west",timezones:["PT"]},{abbr:"PA",name:"Pennsylvania",fips:"42",region:"",timezones:["ET"]},{abbr:"RI",name:"Rhode Island",fips:"44",region:"new england",timezones:["ET"],isMunicipality:!0,reportingType:"Municipality"},{abbr:"SC",name:"South Carolina",fips:"45",region:"south",timezones:["ET"]},{abbr:"SD",name:"South Dakota",fips:"46",region:"",timezones:["CT","MT"]},{abbr:"TN",name:"Tennessee",fips:"47",region:"south",timezones:["CT","ET"]},{abbr:"TX",name:"Texas",fips:"48",region:"south",timezones:["CT"]},{abbr:"UT",name:"Utah",fips:"49",region:"",timezones:["MT"]},{abbr:"VT",name:"Vermont",fips:"50",region:"new england",timezones:["ET"],isTownship:"true",reportingType:"Township"},{abbr:"VA",name:"Virginia",fips:"51",region:"",timezones:["ET"]},{abbr:"WA",name:"Washington",fips:"53",region:"west",timezones:["PT"]},{abbr:"WV",name:"West Virginia",fips:"54",region:"",timezones:["ET"]},{abbr:"WI",name:"Wisconsin",fips:"55",region:"",timezones:["CT"]},{abbr:"WY",name:"Wyoming",fips:"56",region:"",timezones:["MT"]},{abbr:"AS",name:"American Samoa",fips:"60"},{abbr:"GU",name:"Guam",fips:"66"},{abbr:"MP",name:"Northern Mariana Islands",fips:"69"},{abbr:"PR",name:"Puerto Rico",fips:"72",region:"",timezones:["AST"]},{abbr:"VI",name:"Virgin Islands",fips:"78"},{abbr:"LC",name:"Los Angeles",fips:"06037"},{abbr:"SF",name:"San Francisco",fips:"06075"},{abbr:"CH",name:"Chicago",fips:"0000"},{abbr:"PL",name:"Philadelphia",fips:"0000"},{abbr:"HU",name:"Houston",fips:"0000"}]},"./helpers/getElectionTypes.js":(W,T,o)=>{o.r(T),o.d(T,{default:()=>x,electionTypeMap:()=>U,electionTypeNames:()=>R,electionTypeParties:()=>h,getIsCaucusFromRaces:()=>F,getNameByElectionType:()=>z,getPartyByElectionType:()=>v,isCaucusByElectionType:()=>j});var c=o("./helpers/constants.js");const U={G:"General election",D:"Democratic primary",R:"Republican primary",E:"Democratic caucus",S:"Republican caucus"},h={[c.ELECTION_TYPE_CODES.GENERAL_ELECTION]:null,[c.ELECTION_TYPE_CODES.DEMOCRATIC_PRIMARY]:"Dem",[c.ELECTION_TYPE_CODES.DEMOCRATIC_CAUCUS]:"Dem",[c.ELECTION_TYPE_CODES.DEMOCRATIC_RUNOFF]:"Dem",[c.ELECTION_TYPE_CODES.DEMOCRATIC_SPECIAL_PRIMARY]:"Dem",[c.ELECTION_TYPE_CODES.DEMOCRATIC_SPECIAL_PRIMARY_RUNOFF]:"Dem",[c.ELECTION_TYPE_CODES.DEMOCRATIC_STATE_CONVENTION]:"Dem",[c.ELECTION_TYPE_CODES.DEMOCRATIC_FIREHOUSE_PRIMARY]:"Dem",[c.ELECTION_TYPE_CODES.REPUBLICAN_PRIMARY]:"Rep",[c.ELECTION_TYPE_CODES.REPUBLICAN_CAUCUS]:"Rep",[c.ELECTION_TYPE_CODES.REPUBLICAN_RUNOFF]:"Rep",[c.ELECTION_TYPE_CODES.REPUBLICAN_SPECIAL_PRIMARY]:"Rep",[c.ELECTION_TYPE_CODES.REPUBLICAN_SPECIAL_PRIMARY_RUNOFF]:"Rep",[c.ELECTION_TYPE_CODES.REPUBLICAN_STATE_CONVENTION]:"Rep",[c.ELECTION_TYPE_CODES.REPUBLICAN_FIREHOUSE_PRIMARY]:"Rep"},R={G:null,D:"primary",R:"primary",E:"caucus",S:"caucus"},Y=g=>typeof g!="string"?"":U[g],v=g=>typeof g!="string"?null:h[g],z=g=>typeof g!="string"?null:R[g],j=g=>["E","S"].includes(g),F=g=>Array.isArray(g)?g.find(X=>j(X.election_type)):!1,x=Y},"./helpers/isTownship.js":(W,T,o)=>{o.r(T),o.d(T,{default:()=>h});var c=o("./data/usStates.js");const h=({fips:R,stateName:Y,abbr:v})=>{if(typeof Y!="string"&&!R&&!v)return!1;const z=c.default.find(j=>j.name===Y||j.fips===R||j.abbr===v);return z&&!!z.isTownship}},"./helpers/typeChecker.js":(W,T,o)=>{o.r(T),o.d(T,{isEmptyObject:()=>U,isNumber:()=>c});const c=h=>typeof h=="number",U=h=>typeof h=="object"&&!Array.isArray(h)&&Object.keys(h).length===0}}]);
