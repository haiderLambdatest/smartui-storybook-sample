"use strict";(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[5836],{"./components/modules/PageHeader/2022/PageHeaderV2.stories.js":(te,f,t)=>{t.r(f),t.d(f,{AllOptions:()=>Be,__namedExportsOrder:()=>mt,default:()=>it});var L=t("./node_modules/@babel/runtime/helpers/esm/extends.js"),g=t("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_=t("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),A=t("./node_modules/next/dist/compiled/react/index.js"),U=t("./node_modules/dayjs/plugin/timezone.js"),x=t.n(U),D=t("./components/modules/PageHeader/2022/PageHeaderV2.js"),H=t("./server/v2/helpers/getPollsCloseFormatted.js"),W=t("./components/PageAnchor/PageAnchorContext.js"),T=t("./helpers/constants.js"),R=t("./lib/dayjsCustom.js"),V=t("./helpers/stateNameUtilities.js"),b=t("./node_modules/lodash.orderby/index.js"),h=t.n(b),u=t("./node_modules/lodash.get/index.js"),a=t.n(u),B=t("./node_modules/lodash.isempty/index.js"),Z=t.n(B),q=t("./node_modules/dayjs/dayjs.min.js"),z=t.n(q);const O=(e={},n)=>{const{electoral_votes:s}=e;return!s||s===0?{}:{number:s,showPopularVoteLabel:["ME","NE"].includes(n)}};var i=t("./helpers/getHeadshotUrl.js"),d=t("./helpers/determineOfficeType.js"),y=t("./helpers/getCallStatus.js"),K=t("./helpers/getIsWinner.js"),N=t("./helpers/timeUtilities.js"),le=t("./helpers/getNeatVoteModes.js"),ee=t("./server/v2/format/formatParty.js"),de=t("./helpers/getPartyColor.js"),w=t("./server/v2/helpers/isNonPartisanRace.js"),ie=t("./server/v2/format/formatCandidate.js"),oe=t("./server/v2/helpers/dates.js"),ve=t("./components/modules/ResultsSummary/utils.js");const Re=["gain","runoffTotal","uncalledTotal"];function Te(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),s.push.apply(s,o)}return s}function G(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?Te(Object(s),!0).forEach(function(o){(0,_.default)(e,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):Te(Object(s)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(s,o))})}return e}const{PRESIDENT:pe,SENATE:ye,SENATE_SPECIAL:ce,GOVERNOR:ge,HOUSE:ne,ATTORNEY_GENERAL:Ce,LT_GOVERNOR:_e,SECRETARY_OF_STATE:je,MAYOR:De,STATE_SENATE:Se,SUPREME_COURT:Oe}=T.OFFICE_CODES,Pe=[pe,ye,ce,ge,ne,Ce,_e,je,De,Se,Oe],Ie=[pe,ye,ce,ne,ge,je,Ce,_e,De,Se,Oe],he=(e="")=>["O","M"].includes(e),Ee=(e,n)=>{const s=n>=2022?{dem:"bg-009AF4",rep:"bg-D42F37",gop:"bg-D42F37",lib:"bg-5C5C5C",ind:"bg-5C5C5C",other:"bg-5C5C5C"}:{dem:"bg-0471E6",rep:"bg-DE3535",gop:"bg-DE3535",lib:"bg-595959",ind:"bg-595959",other:"bg-595959"};return s[e]||s.other},We=(e,n,s=!1)=>({maxValue:100,caret:{percent:e},showLegend:s,values:n}),Ye=(e={},n,s,o,r,l="2020",p=!1)=>{const j=a()(e,"candidate_name",""),C=a()(e,"candidate_code",""),S=a()(e,"vote",""),P=a()(e,"major_party",""),c=a()(e,"percent",0),M=a()(e,"given_name",""),v=a()(e,"family_name",""),J=a()(e,"call_status",""),Y=o&&a()(e,"is_incumbent",!1),m=(0,ee.default)(P),E=(0,w.default)({officeCode:n,stateAbbr:r}),I=E?(0,de.default)({party:E?P:m,electionSeason:l,officeCode:n,order:e.order,stateAbbr:r,electionTypeCode:s,useFullColorPalette:E}).replace("#","bg-"):Ee(m,l),X=`${c}%`,$=(0,i.default)({party:P,firstName:M,lastName:v,officeCode:n,stateCode:r,electionDate:l,fileFormat:p?"png":"jpg"}),k=(0,K.default)(J);return{callStatus:J,code:C,name:j,firstName:M,lastName:v,headshotUrl:$,isWinner:k,votes:S,party:m,bgColor:I,percentVote:c,formattedPercentVote:X,isIncumbent:Y}};function ze({officeCode:e,stateNameSlug:n,electionSeason:s}){return(e===ye||e===ce)&&n==="georgia"&&s==="2020"}const Ae=({officeCode:e,stateName:n,stateNameSlug:s,isRunoff:o=!1,electionSeason:r,electionTypeCode:l})=>{const p=(0,d.default)(e),j=(0,d.normalizeOfficeName)(p);let C;if(o&&ze({officeCode:e,stateNameSlug:s,electionSeason:r})){const c=e===ce?2:1;C=`${(0,d.default)(e,!1)} Seat ${c} Runoff`}else o?C=`${(0,d.default)(e,!1)} Runoff`:C=n?`${n} ${p} Results`:p;const S="Race Details",P=(0,d.getStateOfficeLink)({officeCode:e,stateNameSlug:s,isRunoff:o,electionSeason:r,electionTypeCode:l});return{officeCode:e,office:j,headlineText:C,linkText:S,href:P}},be=e=>{const n={value:0,displayString:null};let s=null;return e<=0?s=null:e<500?s="Less than 500":s=e.toLocaleString(),n.value=e,n.displayString=s,n},Ge=e=>{const n=new Map;return le.default.forEach(s=>{const{neatFlagKey:o,neatValueKey:r,neatPercentKey:l,neatCandidateValueKey:p,modeKey:j,label:C,color:S}=s,P=`${p}_percent_0`,c=a()(e,o,!1),M=a()(e,r,0),v=a()(e,l,0);if(c){const J=e.candidates.map(m=>{const E=a()(m,P,0),I=a()(m,"major_party",""),X=(0,ee.default)(I);return{bgColor:Ee(X),lastName:a()(m,"family_name",null),percent:`${E}%`,percentInt:E}}),Y=h()(J,["percentInt"],["desc"]);n.set(j,{color:S,position:"left",votes:M,value:M,percent:`${v}%`,percentInt:v,description:C,candidates:Y})}}),n},Je=(e,n,s,o)=>{let r,l,p=!1;const j=[...s].map(([,C])=>G({},C));if(p=!!(s&&s.size&&j.some(C=>C.votes)&&o!=="2022"),p){const S=[],P=[],c=j.filter(v=>v.description!=="Provisional"||v.percentInt>=1);h()(c,["votes","description"],["desc","desc"]).forEach(v=>{(v.description!=="Provisional"||v.percentInt>=1)&&(S.push(v),P.push(v.percentInt))}),r=`${e}%`,l=We(r,S,!0)}else r=`${e}%`,l=We(r,[{color:"#EEB900",position:"left",value:n,percent:r}]);return{percentInFormatted:r,percentInChart:l,usesVoteModes:p}},Ne=(e,n)=>{const s=a()(e,"percent_in",0),o=a()(e,"total_vote",0),r=Ge(e);return Je(s,o,r,n)},Fe=e=>{let n=null;const s=a()(e,"candidates",[]),o=a()(e,"call_status",""),r=(0,y.default)(o)==="Runoff",l=s.filter(p=>(0,y.default)(p.call_status)==="Advance");return r&&l&&l.length&&(l.length>1?n="advance":n="advances"),n},Xe=(e,n,s,o)=>{const j=a()(e,"office_code",""),C=a()(e,"election_type",""),S=a()(e,"candidates",[]),P=a()(e,"state_code",""),c=a()(e,"polls_close",""),M=(0,N.getPollClosedFormatted)(c,e.election_date,o),v=Ae({officeCode:j,stateName:n,stateNameSlug:s}),{number:J,showPopularVoteLabel:Y}=O(e,P),m=S.filter(k=>k.candidate_code===1036||k.candidate_code===8639).map(k=>Ye(k,j,C,!1,P)),E=h()(m,["vote","order"],["desc","asc"]),I=Ne(e),X=a()(e,"remaining_vote")||a()(e,"remaining_total_expected_vote",0),$=be(X);return G(G(G({},I),v),{},{callStatusCode:e.call_status,callStatusText:(0,y.default)(e.call_status)||"",totalElectoralVotes:J,showPopularVoteLabel:Y,candidates:E,estimatedVotesRemaining:$,pollsCloseUTC:c,pollsCloseFormatted:M})},Me=(e,n,s,o,r=!1,l=null,p={})=>{const j=a()(e,"race_name",""),C=a()(e,"office_code",""),S=a()(e,"call_status",""),P=e?.allow_multi_winners??!1,c=e?.election_date,M=e?.election_type,v=(0,y.default)(S)||null,J=(0,V.getStateAbbreviationByStateName)(s),Y=(0,oe.getYearFromElectionDate)(c),m=a()(e,"polls_close_utc",""),E=(0,H.default)({races:[{polls_close_utc:m}],electionDate:c,currentTime:o,stateCode:J}),I=e.election_type===T.ELECTION_TYPE_CODES.GENERAL_RUNOFF,X=Ae({officeCode:C,stateNameSlug:n,isRunoff:I,electionSeason:Y,electionTypeCode:M});let $=(0,ie.formatCandidates)({race:e,headshots:l,colors:p});r||($=$.slice(0,2));const k=Ne(e,Y),F=a()(e,"remaining_vote")||a()(e,"remaining_total_expected_vote",0),se=a()(e,"gain",!1)&&!(0,w.default)({stateAbbr:J,officeCode:C})?(0,ee.default)(a()(e,"party",null)):null,ue=Fe(e),me=be(F),fe=$.find(Ve=>Ve.isWinner)?.colorHex||null;return G(G(G({},k),X),{},{allowMultiWinners:P,callStatusCode:S,callStatusText:v,candidates:$,electionTypeCode:e.election_type,raceId:e.race_id,estimatedVotesRemaining:me,partyGain:se||null,pollsCloseFormatted:E,pollsCloseUTC:m,raceName:j,runoff:ue,stateName:s,winnerColor:fe,district:C===T.OFFICE_CODES.HOUSE?e.jcode:null})},Ze=(e,n,s,o,r)=>{const l=a()(e,"race_name",""),p=a()(e,"office_code",""),j=a()(e,"election_type",""),C=a()(e,"candidates",[]),S=a()(e,"call_status",""),P=(0,y.default)(S)||null,c=(0,V.getStateAbbreviationByStateName)(s),M=a()(e,"polls_close",""),v=(0,N.getPollClosedFormatted)(M,e.election_date,o),J=e.election_type===T.ELECTION_TYPE_CODES.GENERAL_RUNOFF,Y=Ae({officeCode:p,stateNameSlug:n,isRunoff:J}),m=!0,X=h()(C,["vote","order"],["desc","asc"]).slice(0,2).map(me=>Ye(me,p,j,m,c,r)),$=Ne(e,r),k=e.remaining_vote??e.remaining_total_expected_vote??0,Q=a()(e,"gain",!1)&&!(0,w.default)({stateAbbr:c,officeCode:p})?(0,ee.default)(a()(e,"party",null)):null,se=Fe(e),ue=be(k);return G(G(G({},$),Y),{},{stateCode:c,callStatusCode:S,callStatusText:P,candidates:X,electionTypeCode:e.election_type,raceId:e.race_id,estimatedVotesRemaining:ue,partyGain:Q||null,pollsCloseFormatted:v,raceName:l,runoff:se})},Qe=(e,n,s,o)=>{const r=a()(e,"office_code",""),l=a()(e,"races",[]),p=Ae({officeCode:r,stateNameSlug:n,electionSeason:o}),j=o>=2022?"polls_close_utc":"polls_close";l.sort((F,Q)=>z()(F[j]).isBefore(Q[j])?-1:1);const C=a()(l,`[0].${j}`,null),S=a()(l,"[0].election_date",null),P=(0,N.getPollClosedFormatted)(C,S,s),c=l.reduce((F,Q)=>{const{gain:se}=F;let{runoffTotal:ue,uncalledTotal:me}=F;const fe=a()(Q,"party",""),Ke=a()(Q,"call_status",""),Ve=(0,K.default)(Ke),ft=he(Ke);return a()(Q,"gain",!1)&&(se[fe]=se[fe]?se[fe]+1:1),Ve?F[fe]=F[fe]?F[fe]+1:1:ft?ue+=1:me+=1,G(G({},F),{},{gain:se,runoffTotal:ue,uncalledTotal:me})},{gain:{},runoffTotal:0,uncalledTotal:0}),{gain:M,runoffTotal:v,uncalledTotal:J}=c,Y=(0,g.default)(c,Re),m=Object.keys(Y).map(F=>{const Q=c[F],se=(0,ee.default)(F),ue=Ee(se,o),me=M[F]||0;return{party:se,bgClass:ue,totalSeats:Q,totalGain:me}}),E=l.length,I=E===1,X=m.some(F=>F.totalSeats>30),$=!Z()(Y),k=m.sort((F,Q)=>Q.totalSeats-F.totalSeats);return G(G({},p),{},{seats:{runoffTotal:v,uncalledTotal:J,winners:m,sortedWinners:k,hasOneSeat:I,isLargeSeatAmount:X,hasCalls:$,totalOverallSeats:E},pollsCloseFormatted:P})},we=e=>e.find(s=>s.office_code===ne)?e.reduce((s,o)=>{const[r,...l]=s;return o.office_code!==ne?l.push(o):r.races.push(o),[r,...l]},[{office_code:ne,races:[]}]):e,yt=({race:e,stateName:n,stateNameSlug:s,currentTime:o=new Date().toISOString()})=>!e||!Pe.includes(e.office_code)?null:Me(e,s,n,o);function pt({races:e,stateAbbr:n,currentTime:s,headshots:o,colors:r}){return e?.map(l=>Me(l,(0,V.getStateNameSlugByStateAbbreviation)(n),(0,V.getStateNameByStateAbbreviation)(n),s,!0,o,r))??[]}const ke=(e,n,s,o=[],r=!1,l=new Date().toISOString(),p,j=!1,C=!1,S=null,P)=>{if(!e||!e.length)return{};const c=C?Ie:Pe,M=e.filter(E=>c.includes(E.office_code));if(!M.length)return{};const v=M.map(E=>{if(!r)return E;const I=(0,d.getOfficeCodeFromRaceId)(E.race_id);return o.find($=>(0,d.getOfficeCodeFromRaceId)($.race_id)===I)||E});return{races:we(v).sort((E,I)=>c.indexOf(E.office_code)-c.indexOf(I.office_code)).map(E=>{const{office_code:I,election_type:X}=E;if((0,ve.isPresidentialPrimary)({officeCode:I,electionTypeCode:X}))return Me(E,s,n,l,!0,S,P);switch(I){case pe:return Xe(E,n,s,l);case ne:return Qe(E,s,l,p);default:return Me(E,s,n,l,j,S,P)}})}},Et=({race:e,stateName:n,stateNameSlug:s,electionSeason:o,currentTime:r=new Date().toISOString()})=>!e||!Pe.includes(e.office_code)?null:Ze(e,s,n,r,o),gt=ke;var qe=t("./node_modules/dayjs/plugin/utc.js"),et=t.n(qe),tt=t("./server/v2/helpers/getFormattedTimestamp.js");z().extend(et()),z().extend(x());const Le=e=>e?z()(e).isValid():!1,st=(e,n)=>{const s=z()(e),o=z()(n);return s.isAfter(o)},Ct=(...e)=>e.filter(o=>Le(o)).map(o=>z()(o)).reduce((o,r)=>r&&o.isBefore(r)?o:r),ot=(e,n)=>{if(!Le(n))return;const s=!Le(e.lastModified),o=st(n,e.lastModified);(s||o)&&Object.assign(e,{lastModified:n,lastModifiedFormatted:(0,tt.getFormattedTimestampUTC)(n,e.language)})};var nt=t("./components/modules/PageHeader/2022/scenarios/mock.json");const at=["electionSeason","stateAbbr","voteTotal","votesRemaining","percentIn","callStatus","partyGain","electionTypeCode","officeCode"],rt=["title","description","hasDivider","showResults","usePageAnchors","electionDate","lastModifiedTime","lastModifiedDate","pollsClose","currentDate","currentTime"];var $e=A.createElement;function xe(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),s.push.apply(s,o)}return s}function re(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?xe(Object(s),!0).forEach(function(o){(0,_.default)(e,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):xe(Object(s)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(s,o))})}return e}R.dayJsCustom.extend(x());const Ue=[{code:19305,name:"Adam Laxalt",firstName:"Adam",lastName:"Laxalt",party:"gop",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_R_A_LAXALT.png"},{code:65148,name:"Catherine Cortez Masto",firstName:"Catherine",lastName:"Cortez Masto",party:"dem",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_D_C_CORTEZMASTO.png"},{code:20074049,name:"Barry Rubinson",firstName:"Barry",lastName:"Rubinson",party:"iap",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I_B_RUBINSON.png"},{code:497,name:"Neil Scott",firstName:"Neil",lastName:"Scott",party:"lib",hide:!1,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I_N_SCOTT.png"},{code:100013,name:"None of these candidates",firstName:"",lastName:"None of these candidates",party:"non",hide:!0,headshotUrl:"https://nodeassets.nbcnews.com/elections/headshots/2022/NV_S00_I__NONEOFTHESECANDIDATES.png"}],lt=Ue.reduce((e,n,s)=>{const o=`Candidate ${s+1}`,r={category:o};return e[`${o} Hide`]={table:r,control:"boolean"},e[`${o} Vote Share`]={table:r,control:{type:"range",min:0,max:100,step:1}},e[`${o} Is Incumbent`]={table:r,control:"boolean"},e[`${o} Party`]={table:r,control:{type:"text"}},e[`${o} Call Status`]={table:r,control:{type:"select"},options:re({NONE:""},T.CALL_STATUSES)},e},{}),dt=Ue.reduce((e,n,s)=>{const o=`Candidate ${s+1}`;return e[`${o} Hide`]=n.hide,e[`${o} Vote Share`]=50,e[`${o} Is Incumbent`]=s===0,e[`${o} Party`]=n.party,e[`${o} Call Status`]=s===0?T.CALL_STATUSES.WINNER:"",e},{}),it={component:D.default,title:"Global Components/Page Header/2022",argTypes:re({electionDate:{name:"Election Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},lastModifiedTime:{name:"Last Modified Time (ET)",control:{type:"text"},table:{category:"Timestamps"}},lastModifiedDate:{name:"Last Modified Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},pollsClose:{name:"Polls Close (ET)",control:{type:"object"},table:{category:"Timestamps"}},currentDate:{name:"Current Date (ET)",control:{type:"text"},table:{category:"Timestamps"}},currentTime:{name:"Current Time (ET)",control:{type:"text"},table:{category:"Timestamps"}},stateAbbr:{name:"State",options:V.usStateAbbreviations,table:{category:"Results"},control:{type:"select"}},voteTotal:{control:{type:"number"},table:{category:"Results"}},votesRemaining:{control:{type:"number"},table:{category:"Results"}},percentIn:{control:{type:"number",min:0,max:100,step:1},table:{category:"Results"}},callStatus:{control:{type:"select"},options:re({NONE:""},T.CALL_STATUSES),table:{category:"Results"}},partyGain:{control:"boolean",table:{category:"Results"}},electionTypeCode:{options:T.ELECTION_TYPE_CODES,control:{type:"select"},table:{category:"Results"}},officeCode:{options:T.OFFICE_CODES,table:{category:"Results"},control:{type:"select"}}},lt),args:re({title:"Texas Governor election results 2022",description:'<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <a href="#">Ut enim</a> ad minim veniam.</p>',hasDivider:!1,showResults:!0,usePageAnchors:!0,electionDate:"2022-11-08",lastModifiedTime:"17:57:00",lastModifiedDate:"2022-11-08",pollsClose:["20:00:00","19:00:00"],currentDate:"2022-11-08",currentTime:"18:00:00",stateAbbr:"TX",voteTotal:1e6,votesRemaining:543210,percentIn:50,callStatus:T.CALL_STATUSES.WINNER,partyGain:!1,electionTypeCode:T.ELECTION_TYPE_CODES.GENERAL_ELECTION,officeCode:T.OFFICE_CODES.GOVERNOR},dt),parameters:{controls:{exclude:["electionType","className","headshots","electionSeason","houseSeats","hidePollsClose","hideTranslateLink","lastModified","lastModifiedFormatted","pollsCloseFormatted","showLiveTag","stateName","stateResultsSummary","titleTag","currentUrlPath","hasTease"]},status:{type:"deprecated"}}},He=new Map(Object.entries({breakdown:{id:"breakdown",title:"County breakdown",enabled:!0},polls:{id:"polls",title:"Exit polls",enabled:!0},voted:{id:"voted",title:"How Texas voted",enabled:!0}}));function ct(e,n){let{electionSeason:s,stateAbbr:o,voteTotal:r,votesRemaining:l,percentIn:p,callStatus:j,partyGain:C,electionTypeCode:S,officeCode:P}=n,c=(0,g.default)(n,at);if(!e)return{};const M=Ue.map((m,E)=>{const I=`Candidate ${E+1}`,X=c[`${I} Hide`],$=c[`${I} Vote Share`],k=c[`${I} Is Incumbent`],F=c[`${I} Party`],Q=c[`${I} Call Status`];return re(re({},m),{},{callStatus:Q,isWinner:T.WINNING_CALL_STATUSES.includes(Q),bgColor:Ee(F,s),isIncumbent:k,party:F,voteShare:$,hide:X})}),v=M.reduce((m,E)=>m+E.voteShare,0);M.forEach(m=>{m.votes=Math.round(m.voteShare/v*r),m.percentVote=parseFloat((m.voteShare/v*100).toFixed(1)),m.formattedPercentVote=`${m.percentVote}%`});const J=T.PRIMARY_ELECTION_TYPE_CODES.includes(S)?"primary":"general",Y=Array.from(M.filter(m=>!m.hide)).sort((m,E)=>E.votes-m.votes);return{officeCode:P,stateAbbr:o,electionType:J,headshots:nt.headshots,stateResultsSummary:[{percentInFormatted:`${p}%`,percentInChart:{maxValue:100,caret:{percent:`${p}%`},showLegend:!1,values:[{color:"#EEB900",position:"left",value:r,percent:`${p}%`}]},electionTypeCode:S,officeCode:P,usesVoteModes:!1,office:T.OFFICE_NAMES[P],headlineText:T.OFFICE_NAMES[P],linkText:"Race Details",callStatusCode:j,callStatusText:(0,y.default)(j),candidates:Y,raceId:`2022-11-08~${o}~${P}`,estimatedVotesRemaining:{value:l,displayString:l>0?l.toLocaleString():null},partyGain:C?"someparty":null,raceName:T.OFFICE_NAMES[P],runoff:Fe({call_status:j,candidates:Y.map(m=>({call_status:m.callStatus}))})}]}}function ut({pollsClose:e,date:n,time:s,electionDate:o,lastModifiedTime:r,lastModifiedDate:l}){const p=R.dayJsCustom.tz(`${n}T${s}`,"America/New_York").toISOString(),j=n.slice(0,4),C={},S=R.dayJsCustom.tz(`${l}T${r}`,"America/New_York").toISOString();ot(C,S);const P=e.map(M=>({polls_close_utc:R.dayJsCustom.tz(`${o}T${M}`,"America/New_York").toISOString()})),c=(0,H.default)({races:P,electionDate:o,currentTime:p});return re({currentTime:p,electionSeason:j,pollsCloseFormatted:c},C)}const Be=e=>{let{title:n,description:s,hasDivider:o,showResults:r,usePageAnchors:l,electionDate:p,lastModifiedTime:j,lastModifiedDate:C,pollsClose:S,currentDate:P,currentTime:c}=e,M=(0,g.default)(e,rt);const v=ut({pollsClose:S,electionDate:p,date:P,time:c,lastModifiedTime:j,lastModifiedDate:C});return $e(W.PageAnchorContext.Provider,{value:{addAnchor(){},anchors:He}},$e(D.default,(0,L.default)({electionDate:p,title:n,description:s,links:He,hasDivider:o,usePageAnchors:l},v,ct(r,re(re({},v),M)))))};Be.displayName="AllOptions",Be.parameters={knobs:{escapeHTML:!1}};const mt=["AllOptions"]},"./helpers/getIsWinner.js":(te,f,t)=>{t.r(f),t.d(f,{default:()=>g});const g=(_="")=>["A","P","W"].includes(_)},"./helpers/getNeatVoteModes.js":(te,f,t)=>{t.r(f),t.d(f,{default:()=>U,getSupportedVoteModes:()=>x});var L=t("./node_modules/lodash.get/index.js"),g=t.n(L);const _=JSON.parse('{"electionDay":"#E89900","electionDayLight":"#FDF7EB","earlyByMail":"#73A60F","earlyByMailLight":"#F4F8EC","earlyInPerson":"#BE57A1","earlyInPersonLight":"#FAF2F7","provisional":"#12BABC"}'),A=[{neatFlagKey:"eday_vote_flg",neatValueKey:"total_eday_vote",neatPercentKey:"eday_vote_percent_0",neatCandidateValueKey:"eday_vote",modeKey:"electionDay",label:"Election Day",color:g()(_,"electionDay"),lightColor:g()(_,"electionDayLight")},{neatFlagKey:"early_by_mail_flg",neatValueKey:"total_early_by_mail_vote",neatPercentKey:"early_by_mail_vote_percent_0",neatCandidateValueKey:"early_by_mail_vote",modeKey:"earlyByMail",label:"Early by Mail",color:g()(_,"earlyByMail",""),lightColor:g()(_,"earlyByMailLight","")},{neatFlagKey:"early_in_person_flg",neatValueKey:"total_early_in_person_vote",neatPercentKey:"early_in_person_vote_percent_0",neatCandidateValueKey:"early_in_person_vote",modeKey:"earlyInPerson",label:"Early In Person",color:g()(_,"earlyInPerson",""),lightColor:g()(_,"earlyInPersonLight","")},{neatFlagKey:"provisional_flg",neatValueKey:"total_provisional_vote",neatPercentKey:"provisional_vote_percent_0",neatCandidateValueKey:"provisional_vote",modeKey:"provisional",label:"Provisional",color:g()(_,"provisional",""),lightColor:g()(_,"provisionalLight","")}],U=A,x=({race:D,disabled:H=[]})=>A.filter(W=>{const{neatFlagKey:T,modeKey:R}=W;return g()(D,T,!1)&&!H.includes(R)?W:!1})},"./helpers/timeUtilities.js":(te,f,t)=>{t.r(f),t.d(f,{formatDuration:()=>q,getDate:()=>a,getDateNow:()=>B,getPollClosedFormatted:()=>O,isAfter:()=>ae,isBefore:()=>z});var L=t("./node_modules/left-pad/index.js"),g=t.n(L),_=t("./node_modules/parse-iso-duration/index.js"),A=t.n(_),U=t("./node_modules/dayjs/plugin/utc.js"),x=t.n(U),D=t("./node_modules/dayjs/plugin/timezone.js"),H=t.n(D),W=t("./node_modules/dayjs/plugin/isSameOrAfter.js"),T=t.n(W),R=t("./lib/dayjsCustom.js"),V=t("./server/v2/helpers/getPollsCloseFormatted.js");R.dayJsCustom.extend(x()),R.dayJsCustom.extend(H()),R.dayJsCustom.extend(T());const b=i=>Math.floor(i/1e3%60),h=i=>Math.floor(i/(1e3*60)%60),u=i=>Math.floor(i/(1e3*60*60)%24),a=i=>(0,R.dayJsCustom)(i),B=()=>R.dayJsCustom.utc().tz("America/New_York"),Z=i=>g()(String(i),2,"0"),q=i=>{let d;try{d=A()(i)}catch{return null}if(!d)return null;const y=u(d),K=h(d),N=b(d);if(!y){const le=Z(K),ee=Z(N);return`${le}:${ee}`}return`${Z(y)}:${Z(K)}:${Z(N)}`},z=(i,d="day")=>{const y=B(),K=a(i);return(0,R.dayJsCustom)(y).isBefore(K,d)},ae=(i,d="day")=>{const y=B(),K=a(i);return(0,R.dayJsCustom)(y).isAfter(K,d)},O=(i,d,y)=>(0,V.default)({races:[{polls_close_utc:i}],electionDate:d,currentTime:y})},"./server/v2/format/formatCandidate.js":(te,f,t)=>{t.r(f),t.d(f,{formatCandidate:()=>B,formatCandidates:()=>z,formatCountyCandidates:()=>ae,getNeatColor:()=>a});var L=t("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),g=t("./node_modules/lodash-es/orderBy.js"),_=t("./node_modules/lodash-es/round.js"),A=t("./server/v2/format/formatParty.js"),U=t("./server/v2/helpers/isNonPartisanRace.js"),x=t("./helpers/getPartyColor.js"),D=t("./helpers/getHeadshotUrl.js"),H=t("./helpers/getIsWinner.js"),W=t("./helpers/constants.js"),T=t("./server/v2/helpers/dates.js"),R=t("./helpers/isHeadshotUrlValid.js"),V=t("./server/v2/helpers/candidates.js");function b(O,i){var d=Object.keys(O);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(O);i&&(y=y.filter(function(K){return Object.getOwnPropertyDescriptor(O,K).enumerable})),d.push.apply(d,y)}return d}function h(O){for(var i=1;i<arguments.length;i++){var d=arguments[i]!=null?arguments[i]:{};i%2?b(Object(d),!0).forEach(function(y){(0,L.default)(O,y,d[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors(d)):b(Object(d)).forEach(function(y){Object.defineProperty(O,y,Object.getOwnPropertyDescriptor(d,y))})}return O}const u=`${D.headshotBaseUrl}/candidate_fallback_light.png`,a=(O,i)=>{if(!i||!O)return null;const d=i[O]?.color_hex;return d?`#${d}`:null};function B({candidate:O,forcedColorOrder:i,race:d,headshots:y,colors:K={}}){const{candidate_name:N="",candidate_code:le=0,vote:ee="",major_party:de="",percent:w=0,given_name:ie="",family_name:oe="",call_status:ve="",is_incumbent:Re=!1,color_code:Te}=O,{election_date:G,election_type:pe,state_code:ye,office_code:ce,jcode:ge}=d,ne=(0,T.getYearFromElectionDate)(G),Ce=(0,A.default)(de),_e=(0,U.default)({officeCode:ce,stateAbbr:ye}),je=_e||W.PRIMARY_ELECTION_TYPE_CODES.includes(pe),De=a(Te,K),Se=(0,x.default)({party:_e?de:Ce,electionSeason:ne,officeCode:ce,order:i??O.order,stateAbbr:ye,electionTypeCode:pe,useFullColorPalette:je}),Oe=De||Se,Pe=Oe.replace("#","bg-"),Ie=`${w}%`;let he=(0,D.default)({party:de,firstName:ie,lastName:oe,officeCode:ce,stateCode:ye,electionDate:ne,fileFormat:"png",jcodeString:ge!=null?`${ge}`:""});y&&!(0,R.default)(y[ne],he)&&(he=u);const Ee=(0,H.default)(ve);return{callStatus:ve,code:le,name:N,firstName:ie,lastName:oe,headshotUrl:he,isWinner:Ee,votes:ee,party:Ce,bgColor:Pe,colorHex:Oe,percentVote:w,formattedPercentVote:Ie,isIncumbent:Re}}const Z=O=>(0,g.default)(O,["vote","order"],["desc","asc"]);function q(O,i,d){const{order:y,major_party:K}=d,N=K.toLowerCase();return W.PRIMARY_ELECTION_TYPE_CODES.includes(i)&&O[N]?O[N].indexOf(d)+1:y}function z({race:O,headshots:i,colors:d}){const y=Z(O.candidates),K=(0,V.getCandidatesByParty)(y);return y.map(N=>B({forcedColorOrder:q(K,O.election_type,N),headshots:i,candidate:N,race:O,colors:d}))}function ae({county:O,race:i,headshots:d,colors:y}){const K=O.candidates.map(w=>{const ie=i.candidates.find(oe=>oe.candidate_code===w.code);return h(h({},ie),{},{vote:w.vote,percent:w.vote_percent_1,percent_0:w.vote_percent_0})}),N=Z(K),le=(0,V.getCandidatesByParty)(N);let ee=0,de=0;return N.length>1&&(ee=N[0].vote-N[1].vote,de=(0,_.default)(N[0].percent-N[1].percent,1)),N.map((w,ie)=>{const oe=B({forcedColorOrder:q(le,i.election_type,w),headshots:d,race:i,candidate:w,colors:y});return ie===0&&(oe.leadByVotes=ee,oe.leadByPercent=de),oe})}},"./server/v2/format/formatParty.js":(te,f,t)=>{t.r(f),t.d(f,{default:()=>g});var L=t("./server/v2/normalize/normalizePartyAbbreviation.js");function g(_){const A=(0,L.default)(_).toLowerCase();return A==="rep"?"gop":A}},"./server/v2/helpers/candidates.js":(te,f,t)=>{t.r(f),t.d(f,{getCandidatesByParty:()=>A,isGovernorSeatUpForElection:()=>V,isHouseSeatUpForElection:()=>x,isSeatUpForElection:()=>b,isSenateSeatUpForElection:()=>U});var L=t("./node_modules/lodash.orderby/index.js"),g=t.n(L),_=t("./helpers/constants.js");function A(h){return g()(h,["order"],["asc"]).reduce((u,a)=>{const B=(a.major_party||a.party||"").toLowerCase();return B&&(u[B]||(u[B]=[]),u[B].push(a)),u},{})}function U({senateClass:h,electionSeason:u}){let a;switch(h){case 1:a=1790;break;case 2:a=1792;break;case 3:a=1794;break;default:return!1}return(u-a)%6===0}function x({electionSeason:h}){return h%2===0}const D=["NH","VT"],H=["AL","AK","AZ","AR","CA","CO","CT","FL","GA","HI","ID","IL","IA","KS","ME","MD","MA","MI","MN","NE","NV","NM","NY","OH","OK","OR","PA","RI","SC","SD","TN","TX","WI","WY","GU","MP","VI"],W=["DE","IN","MO","MT","NC","ND","UT","WA","WV","AS","PR"],T=["KY","LA","MS"],R=["NJ","VA"];function V({electionSeason:h,stateAbbr:u}){return D.includes(u)?h%2===0:W.includes(u)?(h-1788)%4===0:H.includes(u)?(h-1790)%4===0:T.includes(u)?(h-1787)%4===0:R.includes(u)?(h-1789)%4===0:!1}function b({electionSeason:h,term:u}){return u.office_code===_.OFFICE_CODES.SENATE?U({electionSeason:h,senateClass:u.office_class}):u.office_code===_.OFFICE_CODES.HOUSE?x({electionSeason:h}):u.office_code===_.OFFICE_CODES.GOVERNOR?V({electionSeason:h,stateAbbr:u.state_code}):null}},"./server/v2/helpers/dates.js":(te,f,t)=>{t.r(f),t.d(f,{getYearFromElectionDate:()=>L});function L(g){return g.slice(0,4)}},"./server/v2/helpers/getFormattedTimestamp.js":(te,f,t)=>{t.r(f),t.d(f,{default:()=>V,getFormattedTimestampUTC:()=>T});var L=t("./node_modules/dayjs/plugin/utc.js"),g=t.n(L),_=t("./node_modules/dayjs/plugin/timezone.js"),A=t.n(_),U=t("./node_modules/dayjs/locale/es.js"),x=t.n(U),D=t("./lib/dayjsCustom.js");D.dayJsCustom.extend(g()),D.dayJsCustom.extend(A());const H={SAME_DAY:"h:mm A ET",BEFORE_TODAY:"MMM D, h:mm A ET",PREVIOUS_YEAR:"MMM D, YYYY"},W=(b,h="en")=>{let u="h:mm A ET";const a=(0,D.dayJsCustom)().tz("America/New_York"),B=a.format("YYYY-MM-DD").toString(),Z=a.format("YYYY").toString(),q=b.format("YYYY"),z=b.format("YYYY-MM-DD"),ae=(0,D.dayJsCustom)(Z).diff(q,"year"),O=(0,D.dayJsCustom)(B).diff(z,"day");return O===0&&(u=H.SAME_DAY),O>0&&(u=H.BEFORE_TODAY),ae>0&&(u=H.PREVIOUS_YEAR),b.locale(h).format(u)},T=(b,h="en")=>{if(!b||typeof b!="string")return"";const u=D.dayJsCustom.utc(b).tz("America/New_York");return W(u,h)},V=b=>!b||typeof b!="string"?"":W((0,D.dayJsCustom)(b))},"./server/v2/helpers/getPollsCloseFormatted.js":(te,f,t)=>{t.r(f),t.d(f,{default:()=>T,isSplitPollsCloseState:()=>W});var L=t("./node_modules/dayjs/plugin/utc.js"),g=t.n(L),_=t("./node_modules/dayjs/plugin/timezone.js"),A=t.n(_),U=t("./node_modules/dayjs/plugin/isSameOrAfter.js"),x=t.n(U),D=t("./lib/dayjsCustom.js");D.dayJsCustom.extend(g()),D.dayJsCustom.extend(A()),D.dayJsCustom.extend(x());const H=["AL","AK","NH","FL","MI","KS","IN","ID","ND","OR","KY","TX","SD"];function W(R){return H.includes(R)}function T({races:R,electionDate:V,currentTime:b,stateCode:h}){const u=Array.from(new Set(R.map(ae=>ae.polls_close_utc).filter(Boolean))).sort();if(!u.length)return null;const a=u[0],B=D.dayJsCustom.utc(b).tz("America/New_York"),Z=D.dayJsCustom.utc(V).hour(12).tz("America/New_York"),q=D.dayJsCustom.utc(a).tz("America/New_York");if(B.isSameOrAfter(q))return null;if(B.isBefore(Z,"day"))return`Election on ${Z.format("MMM D")}`;const z=`${q.format("h:mm A")} ET`;return u.length>1?`Polls begin to close today at ${z}`:W(h)?`Polls begin closing at ${q.subtract(1,"hour").format("h:mm A")} ET`:`Polls close at ${z}`}},"./server/v2/helpers/isNonPartisanRace.js":(te,f,t)=>{t.r(f),t.d(f,{default:()=>U});var L=t("./node_modules/lodash.get/index.js"),g=t.n(L),_=t("./helpers/constants.js");const A={[_.OFFICE_CODES.MAYOR]:["LC","CH"],[_.OFFICE_CODES.SUPREME_COURT]:["WI"]};function U({officeCode:x,stateAbbr:D}){return g()(A,[x],[]).includes(D)}},"./server/v2/normalize/normalizePartyAbbreviation.js":(te,f,t)=>{t.r(f),t.d(f,{default:()=>_});const g=A=>{if(typeof A!="string")return!1;const U=A.toLowerCase();return!["dem","rep","ind","lib"].includes(U)};function _(A){if(typeof A!="string")return"other";const U=A.toLowerCase()==="gop"?"Rep":A;return g(U)?"other":U}}}]);
