"use strict";(globalThis.webpackChunkfirecracker=globalThis.webpackChunkfirecracker||[]).push([[1699],{"./components/CirclePackingChart/CirclePackingChart.stories.js":(I,u,e)=>{e.r(u),e.d(u,{VoteModeBubbles:()=>L,__namedExportsOrder:()=>w,default:()=>N});var A=e("./node_modules/@babel/runtime/helpers/esm/extends.js"),E=e("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),l=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),P=e("./node_modules/styled-jsx/style.js"),c=e.n(P),B=e("./node_modules/next/dist/compiled/react/index.js"),M=e("./node_modules/lodash.orderby/index.js"),v=e.n(M),_=e("./components/CirclePackingChart/CirclePackingChart.js"),R=e("./components/CirclePackingChart/Circle.js"),C=e("./helpers/circlePacking.js"),m=e("./helpers/getPartyColor.js");const n=JSON.parse('{"candidates":[{"party":"Rep","lastName":"Youngkin","county":"Lincoln","weight":50},{"party":"Dem","lastName":"McAuliffe","county":"Bland","weight":20},{"party":"Ind","lastName":"Blanding","county":"Prince Edward","weight":15},{"party":"Ind","lastName":"Cher","county":"Petersburg","weight":10},{"party":"O","lastName":"Write-ins","county":"Nelson","weight":5}]}');var a=e("./helpers/constants.js");const r=["usePalette","usePrimariesPalette","useCounties","countyColor"];var t=B.createElement;function i(f,x){var D=Object.keys(f);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(f);x&&(b=b.filter(function(S){return Object.getOwnPropertyDescriptor(f,S).enumerable})),D.push.apply(D,b)}return D}function s(f){for(var x=1;x<arguments.length;x++){var D=arguments[x]!=null?arguments[x]:{};x%2?i(Object(D),!0).forEach(function(b){(0,l.default)(f,b,D[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(D)):i(Object(D)).forEach(function(b){Object.defineProperty(f,b,Object.getOwnPropertyDescriptor(D,b))})}return f}const p={type:"range",min:0,max:100,step:1},y={Rep:"#DE3535",Dem:"#0471E6",other:"#595959"},O=[{name:"Election Day",weight:100},{name:"Early In Person",weight:50},{name:"Early By Mail",weight:25}],{voteModeWeights:j,voteModeDefaults:o}=O.reduce((f,x)=>{const D=`${x.name} Weight`;return f.voteModeWeights[D]={control:p,table:{category:"Global"}},f.voteModeDefaults[D]=x.weight,f},{voteModeWeights:{},voteModeDefaults:{}}),{candidateWeights:g,candidateDefaults:d}=n.candidates.reduce((f,x)=>(O.forEach(D=>{const b=`${x.lastName} ${D.name} Weight`;f.candidateWeights[b]={control:p,table:{category:D.name}},f.candidateDefaults[b]=x.weight}),f),{candidateWeights:{},candidateDefaults:{}}),N={component:_.default,title:"Features/Vote Modes/Circle Packing",argTypes:s(s(s({},j),g),{},{padding:{control:{type:"number",options:{min:0}},table:{category:"Global"}},rotation:{control:{type:"range",min:0,max:360},table:{category:"Global"}},usePrimariesPalette:{control:"boolean",table:{category:"Global"}},usePalette:{options:["none","Dem","Rep"],control:{type:"select"},table:{category:"Global"},if:{arg:"usePrimariesPalette"}},useCounties:{control:"boolean",table:{category:"Global"}},countyColor:{control:{type:"color"},table:{category:"Global"},if:{arg:"useCounties"}}}),args:s(s(s({},o),d),{},{padding:0,usePrimariesPalette:!1,usePalette:"none",useCounties:!1,countyColor:"#eeb900"}),parameters:{controls:{exclude:["chart","strokeColor","strokeWidth","className"]}}};function L(f){let{usePalette:x,usePrimariesPalette:D,useCounties:b,countyColor:S}=f,$=(0,E.default)(f,r);const Y=O.map(h=>{const F=$[`${h.name} Weight`];return{mode:h,weight:F}}),V=Y.reduce((h,F)=>h+F.weight,0),G=Y.map(({mode:h,weight:F})=>{const T=n.candidates.map((W,U)=>s(s({},W),{},{order:U+1,weight:$[`${W.lastName} ${h.name} Weight`]})),K=T.reduce((W,U)=>W+U.weight,0),k=F/V;return s(s({},h),{},{percentInt:k*100,candidates:T.map(W=>s(s({},W),{},{value:W.weight/K*k,percentInt:W.weight/K*100}))})}),J=(0,C.getPackedCircles)({fill:h=>b?S:D&&x!=="none"?(0,m.default)({electionType:a.ELECTION_TYPE.PRIMARY,electionSeason:"2022",electionTypeCode:h.party==="Dem"?a.ELECTION_TYPE_CODES.DEMOCRATIC_PRIMARY:a.ELECTION_TYPE_CODES.REPUBLICAN_PRIMARY,officeCode:a.OFFICE_CODES.GOVERNOR,order:h.order,party:x}):y[h.party]||y.other,children:h=>h.candidates,id:h=>h.lastName||h.name,data:G});return t(B.Fragment,null,t(c(),{id:"2713113481"},[".container.jsx-2713113481{max-width:800px;display:grid;grid-template-columns:repeat(auto-fit,minmax(100px,1fr));grid-gap:12px;font-family:FoundersGroteskCond,Arial Narrow,Arial,sans-serif;}",".header.jsx-2713113481{display:block;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:60px;}",".chart.jsx-2713113481{min-height:60px;-webkit-flex:0 0 60px;-ms-flex:0 0 60px;flex:0 0 60px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;}",".candidate-container.jsx-2713113481 .chart.jsx-2713113481{min-height:unset;display:none;}",".header.jsx-2713113481 h3.jsx-2713113481{font-size:18px;line-height:1.2;margin:0;text-transform:uppercase;}",".vote-mode__heading.jsx-2713113481{margin-left:12px;}",".main.jsx-2713113481{border-top:1px solid #efefef;margin-top:12px;padding-top:12px;}",".candidate-container.jsx-2713113481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:12px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}",".candidate__heading.jsx-2713113481{text-align:left;margin-left:12px;}",".candidate.jsx-2713113481{text-transform:uppercase;}",".percent.jsx-2713113481{font-size:20px;}","@media screen and (min-width:758px){.candidate-container.jsx-2713113481 .chart.jsx-2713113481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.header.jsx-2713113481 h3.jsx-2713113481{font-size:24px;}.header.jsx-2713113481{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}"]),t("div",{className:"jsx-2713113481 container"},J.map((h,F)=>{const T=G[F],K={flexBasis:h.parent.r*2};return t("section",{key:h.id,className:"jsx-2713113481 column"},t("header",{className:"jsx-2713113481 header"},t("div",{style:K,className:"jsx-2713113481 chart"},t(_.default,(0,A.default)({},$,{chart:h}))),t("div",{className:"jsx-2713113481 vote-mode__heading"},t("h3",{className:"jsx-2713113481"},T.name),t("div",{className:"jsx-2713113481"},T.percentInt.toFixed(1),"%"))),t("div",{className:"jsx-2713113481 main"},v()(h.circles,["r"],["desc"]).map(k=>{const W=T.candidates.find(U=>U.lastName===k.id);return t("div",{key:k.id,className:"jsx-2713113481 candidate-container"},t("div",{style:K,className:"jsx-2713113481 chart"},t(R.default,{circle:k})),t("div",{className:"jsx-2713113481 candidate__heading"},t("div",{className:"jsx-2713113481 candidate"},b?W.county:W.lastName),t("div",{className:"jsx-2713113481 percent"},W.percentInt.toFixed(1),"%")))})))})))}const w=["VoteModeBubbles"]},"./components/CirclePackingChart/Circle.js":(I,u,e)=>{e.r(u),e.d(u,{default:()=>_});var A=e("./node_modules/@babel/runtime/helpers/esm/extends.js"),E=e("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),l=e("./node_modules/next/dist/compiled/react/index.js"),P=e("./node_modules/prop-types/index.js"),c=e.n(P),B=e("./components/CirclePackingChart/CirclePackingChart.propsShape.js");const M=["circle","className"];var v=l.createElement;function _(R){let{circle:C,className:m}=R,n=(0,E.default)(R,M);const a=C.r*2,r=C.r;return v("svg",(0,A.default)({className:m,viewBox:`0 0 ${a} ${a}`,width:a,height:a},n),v("circle",{transform:`translate(${r}, ${r})`,fill:C.fill,r:C.r}))}_.displayName="Circle",_.defaultProps={className:null},_.propTypes={className:c().string,circle:B.ProportionalCircle.isRequired}},"./components/CirclePackingChart/CirclePackingChart.js":(I,u,e)=>{e.r(u),e.d(u,{default:()=>C});var A=e("./node_modules/@babel/runtime/helpers/esm/extends.js"),E=e("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),l=e("./node_modules/next/dist/compiled/react/index.js"),P=e("./node_modules/prop-types/index.js"),c=e.n(P),B=e("./node_modules/classnames/index.js"),M=e.n(B),v=e("./components/CirclePackingChart/CirclePackingChart.propsShape.js");const _=["chart","className","padding","rotation","strokeColor","strokeWidth"];var R=l.createElement;function C(m){let{chart:n,className:a,padding:r,rotation:t,strokeColor:i,strokeWidth:s}=m,p=(0,E.default)(m,_);const{parent:y,circles:O}=n,j=y.r,o=y.r*2,g={width:o,height:o,transform:`rotate(${t}deg)`,flex:`0 0 ${o}px`};return R("div",(0,A.default)({className:M()("br-100 container bg-gray-20 relative",a),style:g},p),R("svg",{className:"absolute aspect-ratio--object",viewBox:`0 0 ${o} ${o}`,width:o,height:o},O.map(d=>d.r-r/2<=0?null:R("circle",{key:d.id,transform:`translate(${d.x+j}, ${d.y+j})`,fill:d.fill,stroke:i,strokeWidth:s,r:d.r-r/2}))))}C.displayName="CirclePackingChart",C.defaultProps={className:null,padding:0,rotation:45,strokeColor:"#eff",strokeWidth:1},C.propTypes={className:c().string,chart:v.PackedCircles.isRequired,padding:c().number,strokeColor:c().string,strokeWidth:c().number,rotation:c().number}},"./components/CirclePackingChart/CirclePackingChart.propsShape.js":(I,u,e)=>{e.r(u),e.d(u,{Circle:()=>_,DisplayCoordinates:()=>R,PackedCircles:()=>a,PackedCirclesContainer:()=>C,PositionedCircle:()=>n,ProportionalCircle:()=>m});var A=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),E=e("./node_modules/prop-types/index.js"),l=e.n(E);function P(r,t){var i=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);t&&(s=s.filter(function(p){return Object.getOwnPropertyDescriptor(r,p).enumerable})),i.push.apply(i,s)}return i}function c(r){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?P(Object(i),!0).forEach(function(s){(0,A.default)(r,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(i,s))})}return r}const B={r:l().number.isRequired},M={x:l().number.isRequired,y:l().number.isRequired},v=c(c({},B),{},{id:l().string.isRequired,fill:l().string.isRequired}),_=l().shape(B),R=l().shape(M),C=l().shape(c(c({},B),{},{id:l().string.isRequired})),m=l().shape(v),n=l().shape(c(c({},v),M)),a=l().shape({circles:l().arrayOf(n),parent:C})},"./data/partyColors.js":(I,u,e)=>{e.r(u),e.d(u,{default:()=>A});const A={default:{dem:"#0471E6",rep:"#DE3535",grn:"#7A7A7A",con:"#7A7A7A",rp:"#7A7A7A",wf:"#7A7A7A",ind:"#595959",lib:"#A99369",oth:"#7A7A7A",weq:"black",yes:"#9E0084",no:"#2AA78B",ballotyes:"#9E0084",ballotno:"#2AA78B",iap:"salmon",npa:"brown",non:"green",for:"green",agn:"red",uncalled:"#e6e6e6",default:"#595959",other:"#7A7A7A",undecided:"#EBEBEB"},2022:{dem:"#009AF4",rep:"#D42F37",yes:"#9E0084",no:"#2AA78B",uncalled:"#e6e6e6",default:"#5C5C5C",other:"#7A7A7A",undecided:"#EBEBEB"},2023:{dem:"#009AF4",rep:"#D42F37",yes:"#F96419",no:"#645FAA",uncalled:"#e6e6e6",default:"#5C5C5C",other:"#7A7A7A",undecided:"#EBEBEB"},2024:{dem:"#0487E6",rep:"#DD2929",yes:"#F96419",no:"#645FAA",uncalled:"#BEBEBE",default:"#959595",other:"#7A7A7A",undecided:"#BEBEBE"}}},"./helpers/circlePacking.js":(I,u,e)=>{e.r(u),e.d(u,{getMaxWidth:()=>m,getPackedCircles:()=>C,getProportionalCircles:()=>R});var A=e("./node_modules/@babel/runtime/helpers/esm/defineProperty.js"),E=e("./node_modules/d3-hierarchy/src/pack/siblings.js"),l=e("./node_modules/d3-hierarchy/src/pack/enclose.js"),P=e("./node_modules/lodash.orderby/index.js"),c=e.n(P),B=e("./node_modules/lodash.get/index.js"),M=e.n(B);function v(n,a){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);a&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),r.push.apply(r,t)}return r}function _(n){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?v(Object(r),!0).forEach(function(t){(0,A.default)(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function R({data:n,id:a=s=>s.id,value:r=s=>s.value,fill:t="#eeb900",maxWidth:i=60}){const s=Math.max(...n.map(p=>r(p)));return n.map(p=>{const y=r(p)/s,O=i/2*y;return{id:a(p),fill:t,r:Number.isFinite(O)?O:0}})}function C({data:n,fill:a=(p,y)=>y?"#ebebeb":"#efefef",id:r=p=>p.id,value:t=p=>p.value,children:i=p=>p.children,maxWidth:s=60}){const y=n.map(o=>{const g=i(o,!0)||[];return{id:r(o,!0),fill:a(o,!0),children:g.map(d=>({id:r(d,!1),r:t(d),fill:a(d,!1)}))}}).map(o=>{const g=c()(o.children,["r"],["desc"]);(0,E.default)(g);const d=(0,l.default)(g);return{circles:g,parent:_(_({},d),{},{id:o.id})}}),O=Math.max(...y.map(o=>o.parent.r)),j=s/2/O;return Number.isFinite(j)?y.map(o=>(o.parent.r*=j,o.circles.forEach(g=>{g.r*=j,g.x*=j,g.y*=j}),o)):y}function m(n){return Math.max(M()(n,"parent.r",0),M()(n,"candidates.parent.r",0),M()(n,"counties.parent.r",0))*2}},"./helpers/getPartyColor.js":(I,u,e)=>{e.r(u),e.d(u,{default:()=>C});var A=e("./node_modules/lodash.get/index.js"),E=e.n(A),l=e("./data/partyColors.js"),P=e("./data/primaryColors.json"),c=e("./helpers/constants.js"),B=e("./helpers/isPrimaryElection.js");const M=["dem","rep"],v=["ind","npa","npt"],_=({normalizedParty:m,order:n,officeCode:a,useHousePrimaryColors:r,useFullColorPalette:t,electionSeason:i,electionTypeCode:s,stateAbbr:p})=>{const[y]=P.default;if(!m||typeof m!="string"||!n||typeof n!="number"||!a||typeof a!="string")return y;const O=c.OFFICE_NAMES[a]||"";let j="other",o="other";t&&m==="nonpartisan"?o=a:!t&&O.includes("president")?j="president":O==="house"&&(j=r&&!t?"house":"other",o=t?"other":"house");const g=E()(P,["season",i,a,p,s]),d=E()(P,["season",i,o,m]),N=E()(P,[j,m]),L=n-1,w=E()(g||d||N,[L]),f=E()(P,["season",i,o,"default",m]);return w||f||y},C=({party:m,order:n,officeCode:a,electionSeason:r,electionType:t,electionTypeCode:i="",stateAbbr:s,onlySupportMajorParties:p=!0,useHousePrimaryColors:y=!1,useFullColorPalette:O=!1})=>{const{default:{default:j}}=l.default,g=r&&E()(l.default,[r,"default"])||j;if(!m||typeof m!="string")return g;let d=m.toLowerCase();if(d==="gop"?d="rep":v.includes(d)&&(d="nonpartisan"),(0,B.default)(i)||t===c.ELECTION_TYPE.PRIMARY||O)return _({electionTypeCode:i,normalizedParty:d,order:n,officeCode:a,useHousePrimaryColors:y,useFullColorPalette:O,electionSeason:r,stateAbbr:s});if(p&&!M.includes(d))return g;const N=r&&E()(l.default,[r,d]),L=E()(l.default,["default",d],null);return N||L||g}},"./helpers/isPrimaryElection.js":(I,u,e)=>{e.r(u),e.d(u,{default:()=>P});var A=e("./helpers/constants.js"),E=e("./node_modules/console-browserify/index.js");const P=(c="")=>typeof c!="string"?(E.warn("isPrimaryElection expects a type of string"),!1):A.PRIMARY_ELECTION_TYPE_CODES.includes(c)},"./data/primaryColors.json":I=>{I.exports=JSON.parse('{"president":{"dem":["#3899E7","#A861B5","#84AD48","#DD7026","#697BB6","#3A766F","#6C4682","#F1A410","#89D0E0","#414E7D","#8DB0D9","#8D438B","#738754","#90E0AD","#B8983B","#46A695"],"rep":["#DE3535","#750C0C","#CD7575","#A80101","#9B7777","#470000"]},"house":{"dem":["#308CEF","#C00594","#84AD48","#F96419","#7D78C3","#14866D","#730069","#EEB900","#50CDB1","#68A9EF","#113F75"],"rep":["#DE3535","#6D0000","#EEB8B8","#BB2323","#EE6868","#952727"]},"other":{"dem":["#388FC2","#213F64","#839EBE","#2D5D98","#5F7887","#011521","#285F7F","#5D8CA9","#3A719C","#1F4C83","#3F82AA","#05334F"],"rep":["#DE3535","#750C0C","#CD7575","#A80101","#9B7777","#470000"]},"default":["#595959"],"season":{"2022":{"house":{"dem":[],"rep":[],"default":{"rep":"#D42F37","dem":"#009AF4"}},"other":{"dem":["#009AF4","#8567E6","#20A4A8","#1F69AB","#8A8FBF"],"rep":["#D42F37","#D77F2D","#A23D69","#BD84A3","#CE5883"],"default":{"rep":"#5C5C5C","dem":"#5C5C5C","yes":"#9E0084","no":"#2AA78B"}}},"2023":{"B":{"WI":{"G":["#CD7575","#6873AE"]}},"M":{"CH":{"W":["#5F7887","#839EBE"]}}},"2024":{"other":{"dem":["#0487E6","#034B8F","#00CBAC","#8370F1","#79AF2D","#F1A410","#278685","#8D43AB","#73718B","#8DB0D9","#B89846","#80DAEE","#738754","#90EDAD","#41D7ED"],"rep":["#DD2929","#8F1B1B","#F69696","#E38B39","#B84C96","#FF6000","#9F8383","#BC8604","#DEB703","#E26D99","#D8A084","#877354","#470000","#BB37FF","#8A3752"],"default":{"rep":"#959595","dem":"#959595","yes":"#F96419","no":"#645FAA","other":"#959595"}}}}}')}}]);
